;; gorilla-repl.fileformat = 1
;; Copyright (C) 2012-present, The Authors. This program is free software: you can redistribute it and/or  modify it under the terms of the GNU Affero General Public License, version 3, as published by the Free Software Foundation. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details. You should have received a copy of the GNU Affero General Public License along with this program.  If not, see <http://www.gnu.org/licenses/>.


;; **
;;; # Consensus Hacking
;;; 
;;; I have some code now for working with consensus data, but I need to refine it a bit in order to get the filtering right for what we decide is actually consensus.
;; **

;; @@
(ns consensus-hacking
  (:require [gorilla-plot.core :as plot]
            [gorilla-repl.table :as table]
            [clojure.pprint :as pp]
            [polismath.pretty-printers :as ppp]
            [polismath.clusters :as clust :reload true]
            [polismath.conversation :as conv]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; First let's load in our data.
;; **

;; @@
(def c (conv/read-vectorz-edn (slurp "old/badrepness.edn")))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;consensus-hacking/c</span>","value":"#'consensus-hacking/c"}
;; <=

;; **
;;; Now let's start by computing the "raw" stats for each comment.
;; **

;; @@
(def stats
  (clust/consensus-stats (:rating-mat c)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;consensus-hacking/stats</span>","value":"#'consensus-hacking/stats"}
;; <=

;; **
;;; Now let's work on some plots to visualize the data a bit.
;; **

;; @@
(defn stat-plot
  [attr & opts]
  (apply plot/list-plot (map attr stats) opts))

(defn stat-plots
  [attrs colors]
  (apply plot/compose (map #(stat-plot %1 :color %2 :width 500) attrs colors)))

(table/table-view [[(stat-plots [:pat :pdt] ["steelblue" "red"])] [(stat-plots [:pa :pd] ["steelblue" "red"])]])
;; @@
;; =>
;;; {"type":"list-like","open":"<center><table>","close":"</table></center>","separator":"\n","items":[{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"9f77cb3b-4c0b-45fa-9269-64c26e942c7f","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"9f77cb3b-4c0b-45fa-9269-64c26e942c7f","field":"data.y"}}],"axes":[{"type":"x","scale":"x"},{"type":"y","scale":"y"}],"data":[{"name":"9f77cb3b-4c0b-45fa-9269-64c26e942c7f","values":[{"x":0,"y":-2.2360679774997902},{"x":1,"y":-0.7453559924999302},{"x":2,"y":-4.521814736434731},{"x":3,"y":4.919349550499538},{"x":4,"y":3.833490860027326},{"x":5,"y":1.0434983894999026},{"x":6,"y":3.8124642583151176},{"x":7,"y":5.307910421576298},{"x":8,"y":2.832352771499734},{"x":9,"y":4.323064756499593},{"x":10,"y":3.5386069477175317},{"x":11,"y":3.833490860027326},{"x":12,"y":3.428637565499679},{"x":13,"y":2.832352771499734},{"x":14,"y":2.06418738616856},{"x":15,"y":3.833490860027326},{"x":16,"y":2.110579412044345},{"x":17,"y":3.0},{"x":18,"y":0.5897678246195881},{"x":19,"y":-0.1490711984999862},{"x":20,"y":0.7453559924999302},{"x":21,"y":3.618136134933163},{"x":22,"y":0.4803844614152625},{"x":23,"y":2.121320343559643},{"x":24,"y":0.6255432421712238},{"x":25,"y":-0.22941573387056152},{"x":26,"y":0.0},{"x":27,"y":0.2182178902359926},{"x":28,"y":2.496150883013531},{"x":29,"y":0.0}]},{"name":"1bbfe50c-d290-4150-975c-fa9a04be9c96","values":[{"x":0,"y":-0.1490711984999862},{"x":1,"y":-1.6397831834998453},{"x":2,"y":2.187974872468419},{"x":3,"y":-4.919349550499538},{"x":4,"y":-4.423258684646914},{"x":5,"y":-2.5342103744997617},{"x":6,"y":-4.422458539645536},{"x":7,"y":-5.013026509266502},{"x":8,"y":-3.72677996249965},{"x":9,"y":-5.21749194749951},{"x":10,"y":-4.12837477233712},{"x":11,"y":-4.718142596956708},{"x":12,"y":-3.72677996249965},{"x":13,"y":-3.4286375654996784},{"x":14,"y":-3.243723035407737},{"x":15,"y":-4.423258684646914},{"x":16,"y":-2.1105794120443457},{"x":17,"y":-4.142857142857142},{"x":18,"y":-2.3590712984783546},{"x":19,"y":-2.2360679774997902},{"x":20,"y":-1.937925580499817},{"x":21,"y":-3.919647479510928},{"x":22,"y":-1.1208970766356094},{"x":23,"y":-2.121320343559643},{"x":24,"y":-0.6255432421712238},{"x":25,"y":0.22941573387056152},{"x":26,"y":-0.47140452079103184},{"x":27,"y":-0.2182178902359921},{"x":28,"y":-1.9414506867883012},{"x":29,"y":-0.816496580927726}]}],"marks":[{"type":"symbol","from":{"data":"9f77cb3b-4c0b-45fa-9269-64c26e942c7f"},"properties":{"enter":{"x":{"field":"data.x","scale":"x"},"y":{"field":"data.y","scale":"y"},"fill":{"value":"steelblue"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":70},"stroke":{"value":"transparent"}},"hover":{"size":{"value":210},"stroke":{"value":"white"}}}},{"type":"symbol","from":{"data":"1bbfe50c-d290-4150-975c-fa9a04be9c96"},"properties":{"enter":{"x":{"field":"data.x","scale":"x"},"y":{"field":"data.y","scale":"y"},"fill":{"value":"red"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":70},"stroke":{"value":"transparent"}},"hover":{"size":{"value":210},"stroke":{"value":"white"}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"9f77cb3b-4c0b-45fa-9269-64c26e942c7f\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"9f77cb3b-4c0b-45fa-9269-64c26e942c7f\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"9f77cb3b-4c0b-45fa-9269-64c26e942c7f\", :values ({:x 0, :y -2.2360679774997902} {:x 1, :y -0.7453559924999302} {:x 2, :y -4.521814736434731} {:x 3, :y 4.919349550499538} {:x 4, :y 3.833490860027326} {:x 5, :y 1.0434983894999026} {:x 6, :y 3.8124642583151176} {:x 7, :y 5.307910421576298} {:x 8, :y 2.832352771499734} {:x 9, :y 4.323064756499593} {:x 10, :y 3.5386069477175317} {:x 11, :y 3.833490860027326} {:x 12, :y 3.428637565499679} {:x 13, :y 2.832352771499734} {:x 14, :y 2.06418738616856} {:x 15, :y 3.833490860027326} {:x 16, :y 2.110579412044345} {:x 17, :y 3.0} {:x 18, :y 0.5897678246195881} {:x 19, :y -0.1490711984999862} {:x 20, :y 0.7453559924999302} {:x 21, :y 3.618136134933163} {:x 22, :y 0.4803844614152625} {:x 23, :y 2.121320343559643} {:x 24, :y 0.6255432421712238} {:x 25, :y -0.22941573387056152} {:x 26, :y 0.0} {:x 27, :y 0.2182178902359926} {:x 28, :y 2.496150883013531} {:x 29, :y 0.0})} {:name \"1bbfe50c-d290-4150-975c-fa9a04be9c96\", :values ({:x 0, :y -0.1490711984999862} {:x 1, :y -1.6397831834998453} {:x 2, :y 2.187974872468419} {:x 3, :y -4.919349550499538} {:x 4, :y -4.423258684646914} {:x 5, :y -2.5342103744997617} {:x 6, :y -4.422458539645536} {:x 7, :y -5.013026509266502} {:x 8, :y -3.72677996249965} {:x 9, :y -5.21749194749951} {:x 10, :y -4.12837477233712} {:x 11, :y -4.718142596956708} {:x 12, :y -3.72677996249965} {:x 13, :y -3.4286375654996784} {:x 14, :y -3.243723035407737} {:x 15, :y -4.423258684646914} {:x 16, :y -2.1105794120443457} {:x 17, :y -4.142857142857142} {:x 18, :y -2.3590712984783546} {:x 19, :y -2.2360679774997902} {:x 20, :y -1.937925580499817} {:x 21, :y -3.919647479510928} {:x 22, :y -1.1208970766356094} {:x 23, :y -2.121320343559643} {:x 24, :y -0.6255432421712238} {:x 25, :y 0.22941573387056152} {:x 26, :y -0.47140452079103184} {:x 27, :y -0.2182178902359921} {:x 28, :y -1.9414506867883012} {:x 29, :y -0.816496580927726})}), :marks ({:type \"symbol\", :from {:data \"9f77cb3b-4c0b-45fa-9269-64c26e942c7f\"}, :properties {:enter {:x {:field \"data.x\", :scale \"x\"}, :y {:field \"data.y\", :scale \"y\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"1bbfe50c-d290-4150-975c-fa9a04be9c96\"}, :properties {:enter {:x {:field \"data.x\", :scale \"x\"}, :y {:field \"data.y\", :scale \"y\"}, :fill {:value \"red\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}})}}"}],"value":"[#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"9f77cb3b-4c0b-45fa-9269-64c26e942c7f\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"9f77cb3b-4c0b-45fa-9269-64c26e942c7f\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"9f77cb3b-4c0b-45fa-9269-64c26e942c7f\", :values ({:x 0, :y -2.2360679774997902} {:x 1, :y -0.7453559924999302} {:x 2, :y -4.521814736434731} {:x 3, :y 4.919349550499538} {:x 4, :y 3.833490860027326} {:x 5, :y 1.0434983894999026} {:x 6, :y 3.8124642583151176} {:x 7, :y 5.307910421576298} {:x 8, :y 2.832352771499734} {:x 9, :y 4.323064756499593} {:x 10, :y 3.5386069477175317} {:x 11, :y 3.833490860027326} {:x 12, :y 3.428637565499679} {:x 13, :y 2.832352771499734} {:x 14, :y 2.06418738616856} {:x 15, :y 3.833490860027326} {:x 16, :y 2.110579412044345} {:x 17, :y 3.0} {:x 18, :y 0.5897678246195881} {:x 19, :y -0.1490711984999862} {:x 20, :y 0.7453559924999302} {:x 21, :y 3.618136134933163} {:x 22, :y 0.4803844614152625} {:x 23, :y 2.121320343559643} {:x 24, :y 0.6255432421712238} {:x 25, :y -0.22941573387056152} {:x 26, :y 0.0} {:x 27, :y 0.2182178902359926} {:x 28, :y 2.496150883013531} {:x 29, :y 0.0})} {:name \"1bbfe50c-d290-4150-975c-fa9a04be9c96\", :values ({:x 0, :y -0.1490711984999862} {:x 1, :y -1.6397831834998453} {:x 2, :y 2.187974872468419} {:x 3, :y -4.919349550499538} {:x 4, :y -4.423258684646914} {:x 5, :y -2.5342103744997617} {:x 6, :y -4.422458539645536} {:x 7, :y -5.013026509266502} {:x 8, :y -3.72677996249965} {:x 9, :y -5.21749194749951} {:x 10, :y -4.12837477233712} {:x 11, :y -4.718142596956708} {:x 12, :y -3.72677996249965} {:x 13, :y -3.4286375654996784} {:x 14, :y -3.243723035407737} {:x 15, :y -4.423258684646914} {:x 16, :y -2.1105794120443457} {:x 17, :y -4.142857142857142} {:x 18, :y -2.3590712984783546} {:x 19, :y -2.2360679774997902} {:x 20, :y -1.937925580499817} {:x 21, :y -3.919647479510928} {:x 22, :y -1.1208970766356094} {:x 23, :y -2.121320343559643} {:x 24, :y -0.6255432421712238} {:x 25, :y 0.22941573387056152} {:x 26, :y -0.47140452079103184} {:x 27, :y -0.2182178902359921} {:x 28, :y -1.9414506867883012} {:x 29, :y -0.816496580927726})}), :marks ({:type \"symbol\", :from {:data \"9f77cb3b-4c0b-45fa-9269-64c26e942c7f\"}, :properties {:enter {:x {:field \"data.x\", :scale \"x\"}, :y {:field \"data.y\", :scale \"y\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"1bbfe50c-d290-4150-975c-fa9a04be9c96\"}, :properties {:enter {:x {:field \"data.x\", :scale \"x\"}, :y {:field \"data.y\", :scale \"y\"}, :fill {:value \"red\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}})}}]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc","field":"data.y"}}],"axes":[{"type":"x","scale":"x"},{"type":"y","scale":"y"}],"data":[{"name":"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc","values":[{"x":0,"y":0.3260869565217391},{"x":1,"y":0.4347826086956522},{"x":2,"y":0.1666666666666667},{"x":3,"y":0.8478260869565217},{"x":4,"y":0.7659574468085106},{"x":5,"y":0.5652173913043478},{"x":6,"y":0.7727272727272727},{"x":7,"y":0.8723404255319149},{"x":8,"y":0.6956521739130435},{"x":9,"y":0.8043478260869565},{"x":10,"y":0.7446808510638298},{"x":11,"y":0.7659574468085106},{"x":12,"y":0.7391304347826086},{"x":13,"y":0.6956521739130435},{"x":14,"y":0.6382978723404255},{"x":15,"y":0.7659574468085106},{"x":16,"y":0.6444444444444444},{"x":17,"y":0.7},{"x":18,"y":0.5319148936170213},{"x":19,"y":0.4782608695652174},{"x":20,"y":0.5434782608695652},{"x":21,"y":0.7555555555555556},{"x":22,"y":0.525},{"x":23,"y":0.6666666666666667},{"x":24,"y":0.5416666666666667},{"x":25,"y":0.45},{"x":26,"y":0.4736842105263158},{"x":27,"y":0.5},{"x":28,"y":0.7857142857142857},{"x":29,"y":0.4285714285714286}]},{"name":"14fa7c5a-7e3e-4221-a3d3-dabd647e6829","values":[{"x":0,"y":0.4782608695652174},{"x":1,"y":0.3695652173913043},{"x":2,"y":0.6458333333333333},{"x":3,"y":0.1304347826086957},{"x":4,"y":0.1702127659574468},{"x":5,"y":0.3043478260869565},{"x":6,"y":0.1590909090909091},{"x":7,"y":0.1276595744680851},{"x":8,"y":0.2173913043478261},{"x":9,"y":0.108695652173913},{"x":10,"y":0.1914893617021277},{"x":11,"y":0.148936170212766},{"x":12,"y":0.2173913043478261},{"x":13,"y":0.2391304347826087},{"x":14,"y":0.2553191489361702},{"x":15,"y":0.1702127659574468},{"x":16,"y":0.3333333333333333},{"x":17,"y":0.2},{"x":18,"y":0.3191489361702128},{"x":19,"y":0.3260869565217391},{"x":20,"y":0.3478260869565217},{"x":21,"y":0.2},{"x":22,"y":0.4},{"x":23,"y":0.303030303030303},{"x":24,"y":0.4166666666666667},{"x":25,"y":0.5},{"x":26,"y":0.4210526315789474},{"x":27,"y":0.4545454545454545},{"x":28,"y":0.2142857142857143},{"x":29,"y":0.2857142857142857}]}],"marks":[{"type":"symbol","from":{"data":"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc"},"properties":{"enter":{"x":{"field":"data.x","scale":"x"},"y":{"field":"data.y","scale":"y"},"fill":{"value":"steelblue"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":70},"stroke":{"value":"transparent"}},"hover":{"size":{"value":210},"stroke":{"value":"white"}}}},{"type":"symbol","from":{"data":"14fa7c5a-7e3e-4221-a3d3-dabd647e6829"},"properties":{"enter":{"x":{"field":"data.x","scale":"x"},"y":{"field":"data.y","scale":"y"},"fill":{"value":"red"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":70},"stroke":{"value":"transparent"}},"hover":{"size":{"value":210},"stroke":{"value":"white"}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc\", :values ({:x 0, :y 15/46} {:x 1, :y 10/23} {:x 2, :y 1/6} {:x 3, :y 39/46} {:x 4, :y 36/47} {:x 5, :y 13/23} {:x 6, :y 17/22} {:x 7, :y 41/47} {:x 8, :y 16/23} {:x 9, :y 37/46} {:x 10, :y 35/47} {:x 11, :y 36/47} {:x 12, :y 17/23} {:x 13, :y 16/23} {:x 14, :y 30/47} {:x 15, :y 36/47} {:x 16, :y 29/45} {:x 17, :y 7/10} {:x 18, :y 25/47} {:x 19, :y 11/23} {:x 20, :y 25/46} {:x 21, :y 34/45} {:x 22, :y 21/40} {:x 23, :y 2/3} {:x 24, :y 13/24} {:x 25, :y 9/20} {:x 26, :y 9/19} {:x 27, :y 1/2} {:x 28, :y 11/14} {:x 29, :y 3/7})} {:name \"14fa7c5a-7e3e-4221-a3d3-dabd647e6829\", :values ({:x 0, :y 11/23} {:x 1, :y 17/46} {:x 2, :y 31/48} {:x 3, :y 3/23} {:x 4, :y 8/47} {:x 5, :y 7/23} {:x 6, :y 7/44} {:x 7, :y 6/47} {:x 8, :y 5/23} {:x 9, :y 5/46} {:x 10, :y 9/47} {:x 11, :y 7/47} {:x 12, :y 5/23} {:x 13, :y 11/46} {:x 14, :y 12/47} {:x 15, :y 8/47} {:x 16, :y 1/3} {:x 17, :y 1/5} {:x 18, :y 15/47} {:x 19, :y 15/46} {:x 20, :y 8/23} {:x 21, :y 1/5} {:x 22, :y 2/5} {:x 23, :y 10/33} {:x 24, :y 5/12} {:x 25, :y 1/2} {:x 26, :y 8/19} {:x 27, :y 5/11} {:x 28, :y 3/14} {:x 29, :y 2/7})}), :marks ({:type \"symbol\", :from {:data \"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc\"}, :properties {:enter {:x {:field \"data.x\", :scale \"x\"}, :y {:field \"data.y\", :scale \"y\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"14fa7c5a-7e3e-4221-a3d3-dabd647e6829\"}, :properties {:enter {:x {:field \"data.x\", :scale \"x\"}, :y {:field \"data.y\", :scale \"y\"}, :fill {:value \"red\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}})}}"}],"value":"[#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc\", :values ({:x 0, :y 15/46} {:x 1, :y 10/23} {:x 2, :y 1/6} {:x 3, :y 39/46} {:x 4, :y 36/47} {:x 5, :y 13/23} {:x 6, :y 17/22} {:x 7, :y 41/47} {:x 8, :y 16/23} {:x 9, :y 37/46} {:x 10, :y 35/47} {:x 11, :y 36/47} {:x 12, :y 17/23} {:x 13, :y 16/23} {:x 14, :y 30/47} {:x 15, :y 36/47} {:x 16, :y 29/45} {:x 17, :y 7/10} {:x 18, :y 25/47} {:x 19, :y 11/23} {:x 20, :y 25/46} {:x 21, :y 34/45} {:x 22, :y 21/40} {:x 23, :y 2/3} {:x 24, :y 13/24} {:x 25, :y 9/20} {:x 26, :y 9/19} {:x 27, :y 1/2} {:x 28, :y 11/14} {:x 29, :y 3/7})} {:name \"14fa7c5a-7e3e-4221-a3d3-dabd647e6829\", :values ({:x 0, :y 11/23} {:x 1, :y 17/46} {:x 2, :y 31/48} {:x 3, :y 3/23} {:x 4, :y 8/47} {:x 5, :y 7/23} {:x 6, :y 7/44} {:x 7, :y 6/47} {:x 8, :y 5/23} {:x 9, :y 5/46} {:x 10, :y 9/47} {:x 11, :y 7/47} {:x 12, :y 5/23} {:x 13, :y 11/46} {:x 14, :y 12/47} {:x 15, :y 8/47} {:x 16, :y 1/3} {:x 17, :y 1/5} {:x 18, :y 15/47} {:x 19, :y 15/46} {:x 20, :y 8/23} {:x 21, :y 1/5} {:x 22, :y 2/5} {:x 23, :y 10/33} {:x 24, :y 5/12} {:x 25, :y 1/2} {:x 26, :y 8/19} {:x 27, :y 5/11} {:x 28, :y 3/14} {:x 29, :y 2/7})}), :marks ({:type \"symbol\", :from {:data \"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc\"}, :properties {:enter {:x {:field \"data.x\", :scale \"x\"}, :y {:field \"data.y\", :scale \"y\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"14fa7c5a-7e3e-4221-a3d3-dabd647e6829\"}, :properties {:enter {:x {:field \"data.x\", :scale \"x\"}, :y {:field \"data.y\", :scale \"y\"}, :fill {:value \"red\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}})}}]"}],"value":"#gorilla_repl.table.TableView{:contents [[#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"9f77cb3b-4c0b-45fa-9269-64c26e942c7f\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"9f77cb3b-4c0b-45fa-9269-64c26e942c7f\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"9f77cb3b-4c0b-45fa-9269-64c26e942c7f\", :values ({:x 0, :y -2.2360679774997902} {:x 1, :y -0.7453559924999302} {:x 2, :y -4.521814736434731} {:x 3, :y 4.919349550499538} {:x 4, :y 3.833490860027326} {:x 5, :y 1.0434983894999026} {:x 6, :y 3.8124642583151176} {:x 7, :y 5.307910421576298} {:x 8, :y 2.832352771499734} {:x 9, :y 4.323064756499593} {:x 10, :y 3.5386069477175317} {:x 11, :y 3.833490860027326} {:x 12, :y 3.428637565499679} {:x 13, :y 2.832352771499734} {:x 14, :y 2.06418738616856} {:x 15, :y 3.833490860027326} {:x 16, :y 2.110579412044345} {:x 17, :y 3.0} {:x 18, :y 0.5897678246195881} {:x 19, :y -0.1490711984999862} {:x 20, :y 0.7453559924999302} {:x 21, :y 3.618136134933163} {:x 22, :y 0.4803844614152625} {:x 23, :y 2.121320343559643} {:x 24, :y 0.6255432421712238} {:x 25, :y -0.22941573387056152} {:x 26, :y 0.0} {:x 27, :y 0.2182178902359926} {:x 28, :y 2.496150883013531} {:x 29, :y 0.0})} {:name \"1bbfe50c-d290-4150-975c-fa9a04be9c96\", :values ({:x 0, :y -0.1490711984999862} {:x 1, :y -1.6397831834998453} {:x 2, :y 2.187974872468419} {:x 3, :y -4.919349550499538} {:x 4, :y -4.423258684646914} {:x 5, :y -2.5342103744997617} {:x 6, :y -4.422458539645536} {:x 7, :y -5.013026509266502} {:x 8, :y -3.72677996249965} {:x 9, :y -5.21749194749951} {:x 10, :y -4.12837477233712} {:x 11, :y -4.718142596956708} {:x 12, :y -3.72677996249965} {:x 13, :y -3.4286375654996784} {:x 14, :y -3.243723035407737} {:x 15, :y -4.423258684646914} {:x 16, :y -2.1105794120443457} {:x 17, :y -4.142857142857142} {:x 18, :y -2.3590712984783546} {:x 19, :y -2.2360679774997902} {:x 20, :y -1.937925580499817} {:x 21, :y -3.919647479510928} {:x 22, :y -1.1208970766356094} {:x 23, :y -2.121320343559643} {:x 24, :y -0.6255432421712238} {:x 25, :y 0.22941573387056152} {:x 26, :y -0.47140452079103184} {:x 27, :y -0.2182178902359921} {:x 28, :y -1.9414506867883012} {:x 29, :y -0.816496580927726})}), :marks ({:type \"symbol\", :from {:data \"9f77cb3b-4c0b-45fa-9269-64c26e942c7f\"}, :properties {:enter {:x {:field \"data.x\", :scale \"x\"}, :y {:field \"data.y\", :scale \"y\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"1bbfe50c-d290-4150-975c-fa9a04be9c96\"}, :properties {:enter {:x {:field \"data.x\", :scale \"x\"}, :y {:field \"data.y\", :scale \"y\"}, :fill {:value \"red\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}})}}] [#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc\", :values ({:x 0, :y 15/46} {:x 1, :y 10/23} {:x 2, :y 1/6} {:x 3, :y 39/46} {:x 4, :y 36/47} {:x 5, :y 13/23} {:x 6, :y 17/22} {:x 7, :y 41/47} {:x 8, :y 16/23} {:x 9, :y 37/46} {:x 10, :y 35/47} {:x 11, :y 36/47} {:x 12, :y 17/23} {:x 13, :y 16/23} {:x 14, :y 30/47} {:x 15, :y 36/47} {:x 16, :y 29/45} {:x 17, :y 7/10} {:x 18, :y 25/47} {:x 19, :y 11/23} {:x 20, :y 25/46} {:x 21, :y 34/45} {:x 22, :y 21/40} {:x 23, :y 2/3} {:x 24, :y 13/24} {:x 25, :y 9/20} {:x 26, :y 9/19} {:x 27, :y 1/2} {:x 28, :y 11/14} {:x 29, :y 3/7})} {:name \"14fa7c5a-7e3e-4221-a3d3-dabd647e6829\", :values ({:x 0, :y 11/23} {:x 1, :y 17/46} {:x 2, :y 31/48} {:x 3, :y 3/23} {:x 4, :y 8/47} {:x 5, :y 7/23} {:x 6, :y 7/44} {:x 7, :y 6/47} {:x 8, :y 5/23} {:x 9, :y 5/46} {:x 10, :y 9/47} {:x 11, :y 7/47} {:x 12, :y 5/23} {:x 13, :y 11/46} {:x 14, :y 12/47} {:x 15, :y 8/47} {:x 16, :y 1/3} {:x 17, :y 1/5} {:x 18, :y 15/47} {:x 19, :y 15/46} {:x 20, :y 8/23} {:x 21, :y 1/5} {:x 22, :y 2/5} {:x 23, :y 10/33} {:x 24, :y 5/12} {:x 25, :y 1/2} {:x 26, :y 8/19} {:x 27, :y 5/11} {:x 28, :y 3/14} {:x 29, :y 2/7})}), :marks ({:type \"symbol\", :from {:data \"cb91a34d-7a0e-4fc3-aa91-4bb7297747dc\"}, :properties {:enter {:x {:field \"data.x\", :scale \"x\"}, :y {:field \"data.y\", :scale \"y\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"14fa7c5a-7e3e-4221-a3d3-dabd647e6829\"}, :properties {:enter {:x {:field \"data.x\", :scale \"x\"}, :y {:field \"data.y\", :scale \"y\"}, :fill {:value \"red\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}})}}]], :opts nil}"}
;; <=

;; **
;;; Well... that seems to make lots of sense for this conversation. Most people agree on most things. There are only a couple of things that pop up above the 50% line on the disagree, and they aren't there by "much". So the results I've seen (in regular repl) make sense. For posterity though, let's see what the top picks are for this conversation:
;; **

;; @@
(def slctd
  (clust/select-consensus-comments stats))

(ppp/wide-pp slctd)
;; @@
;; ->
;;; {:agree
;;;  ({:pat 5.307910421576298, :pd 6/47, :pa 41/47, :na 40, :pdt -5.013026509266502, :nd 5, :ns 45, :am 4.6303048358431536, :dm -0.6399608309701916, :tid 7}
;;;   {:pat 4.919349550499538, :pd 3/23, :pa 39/46, :na 38, :pdt -4.919349550499538, :nd 5, :ns 44, :am 4.170752879771348, :dm -0.6416542891955922, :tid 3}
;;;   {:pat 4.323064756499593, :pd 5/46, :pa 37/46, :na 36, :pdt -5.21749194749951, :nd 4, :ns 44, :am 3.477247738923586, :dm -0.5671186899455987, :tid 9}
;;;   {:pat 3.8124642583151176, :pd 7/44, :pa 17/22, :na 33, :pdt -4.422458539645536, :nd 6, :ns 42, :am 2.945995108698045, :dm -0.7035729494890626, :tid 6}
;;;   {:pat 3.833490860027326, :pd 8/47, :pa 36/47, :na 35, :pdt -4.423258684646914, :nd 7, :ns 45, :am 2.9362908715102924, :dm -0.7528950952590492, :tid 4}),
;;;  :disagree ({:pat -4.521814736434731, :pd 31/48, :pa 1/6, :na 7, :pdt 2.187974872468419, :nd 30, :ns 46, :am -0.7536357894057887, :dm 1.4130671051358537, :tid 2})}
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; Yeah; that all seems reasonable. Great. Well, let's ship this feature! Just have to add to the mongo dump whitelist.
;; **

;; @@

;; @@
