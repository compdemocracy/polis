;; gorilla-repl.fileformat = 1
;; Copyright (C) 2012-present, The Authors. This program is free software: you can redistribute it and/or  modify it under the terms of the GNU Affero General Public License, version 3, as published by the Free Software Foundation. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details. You should have received a copy of the GNU Affero General Public License along with this program.  If not, see <http://www.gnu.org/licenses/>.


;; **
;;; # Repness debugging
;;; 
;;; Mike noticed a week or so ago there was [a conversation](https://pol.is/62waejb6in) that had (and still has as of the time of this writing) a top repful comment showing up as "0% disagree". This obviously didn't seem right. In that particular case, 100% agreed actually (2/2 people).
;;; 
;;; Another one came up just in the last day or so with the conversation on the about page. In this, we saw the same thing, except that there were 4 people in the group with 75% of people _agreeing_, and there were other repful comment _behind_ the weird comment. Unfortunately, this is no longer the case for this group, so we can't use it as a second example (Note to self: really need some sort of state-snapshot functionality...).
;;; 
;;; Given that in both cases, there were actually more people agreeing than disagreeing, it seems most likely something is going bonkers as the sorting is happening.
;;; 
;;; Let's take a look into this:
;; **

;; @@
(ns repness-debugging
  (:require [gorilla-plot.core :as plot]
            [gorilla-repl.table :as tbl]
            [semantic-csv.core :as scsv]
            [polismath
             [utils :refer :all]
             [clusters :as pclst]
             [named-matrix :as nm]
             [pretty-printers :as ppp]
             [conversation :as pconv]
             [microscope :as pms]
             [db :as pdb]]
            :reload))
(require 'cheshire.core 'clojure.walk clojure.pretty)

(defn head
  ([xs] (take 10 xs))
  ([xs n] (take n xs)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;repness-debugging/head</span>","value":"#'repness-debugging/head"}
;; <=

;; **
;;; The files are located in `old/badrepness2`, and there are files 
;;; 
;;;     62waejb6in.comments.csv
;;;     62waejb6in.mathresults.json
;;;     62waejb6in.votes.csv
;;;     
;;; (`62waejb6in` is the conversation zid that's misbehaving)
;;; 
;;; Let's load these in:
;; **

;; @@
(defn badrepfile [end-name]
  (str "old/badrepness2/62waejb6in." end-name))

(def comments (scsv/slurp-csv (badrepfile "comments.csv")
                              :cast-fns scsv/->int 
                              :cast-only [:tid :mod]))
(def votes (scsv/slurp-csv (badrepfile "votes.csv")
                           :cast-fns scsv/->long))

(tbl/table-view (scsv/vectorize {:header [:tid :mod]} comments))
(tbl/table-view (head (scsv/vectorize votes)))
;; @@
;; =>
;;; {"type":"list-like","open":"<center><table>","close":"</table></center>","separator":"\n","items":[{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;zid&quot;</span>","value":"\"zid\""},{"type":"html","content":"<span class='clj-string'>&quot;pid&quot;</span>","value":"\"pid\""},{"type":"html","content":"<span class='clj-string'>&quot;tid&quot;</span>","value":"\"tid\""},{"type":"html","content":"<span class='clj-string'>&quot;vote&quot;</span>","value":"\"vote\""},{"type":"html","content":"<span class='clj-string'>&quot;created&quot;</span>","value":"\"created\""}],"value":"[\"zid\" \"pid\" \"tid\" \"vote\" \"created\"]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>12575</span>","value":"12575"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>-1</span>","value":"-1"},{"type":"html","content":"<span class='clj-long'>1423552176040</span>","value":"1423552176040"}],"value":"[12575 0 0 -1 1423552176040]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>12575</span>","value":"12575"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-long'>-1</span>","value":"-1"},{"type":"html","content":"<span class='clj-long'>1423552264009</span>","value":"1423552264009"}],"value":"[12575 0 1 -1 1423552264009]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>12575</span>","value":"12575"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>2</span>","value":"2"},{"type":"html","content":"<span class='clj-long'>-1</span>","value":"-1"},{"type":"html","content":"<span class='clj-long'>1423552270280</span>","value":"1423552270280"}],"value":"[12575 0 2 -1 1423552270280]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>12575</span>","value":"12575"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>3</span>","value":"3"},{"type":"html","content":"<span class='clj-long'>-1</span>","value":"-1"},{"type":"html","content":"<span class='clj-long'>1423552275166</span>","value":"1423552275166"}],"value":"[12575 0 3 -1 1423552275166]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>12575</span>","value":"12575"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>4</span>","value":"4"},{"type":"html","content":"<span class='clj-long'>-1</span>","value":"-1"},{"type":"html","content":"<span class='clj-long'>1423552290021</span>","value":"1423552290021"}],"value":"[12575 0 4 -1 1423552290021]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>12575</span>","value":"12575"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>5</span>","value":"5"},{"type":"html","content":"<span class='clj-long'>-1</span>","value":"-1"},{"type":"html","content":"<span class='clj-long'>1423552299927</span>","value":"1423552299927"}],"value":"[12575 0 5 -1 1423552299927]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>12575</span>","value":"12575"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-long'>4</span>","value":"4"},{"type":"html","content":"<span class='clj-long'>-1</span>","value":"-1"},{"type":"html","content":"<span class='clj-long'>1423552479064</span>","value":"1423552479064"}],"value":"[12575 1 4 -1 1423552479064]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>12575</span>","value":"12575"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-long'>-1</span>","value":"-1"},{"type":"html","content":"<span class='clj-long'>1423552482045</span>","value":"1423552482045"}],"value":"[12575 1 1 -1 1423552482045]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-long'>12575</span>","value":"12575"},{"type":"html","content":"<span class='clj-long'>2</span>","value":"2"},{"type":"html","content":"<span class='clj-long'>4</span>","value":"4"},{"type":"html","content":"<span class='clj-long'>-1</span>","value":"-1"},{"type":"html","content":"<span class='clj-long'>1423553163346</span>","value":"1423553163346"}],"value":"[12575 2 4 -1 1423553163346]"}],"value":"#gorilla_repl.table.TableView{:contents ([\"zid\" \"pid\" \"tid\" \"vote\" \"created\"] [12575 0 0 -1 1423552176040] [12575 0 1 -1 1423552264009] [12575 0 2 -1 1423552270280] [12575 0 3 -1 1423552275166] [12575 0 4 -1 1423552290021] [12575 0 5 -1 1423552299927] [12575 1 4 -1 1423552479064] [12575 1 1 -1 1423552482045] [12575 2 4 -1 1423553163346]), :opts nil}"}
;; <=

;; @@
(def mathresults (-> "mathresults.json"
                     badrepfile
                     slurp
                     cheshire.core/decode
                     clojure.walk/keywordize-keys))
(keys mathresults)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>(:zid :group-votes :in-conv :group-clusters :base-clusters :lastVoteTimestamp :lastModTimestamp :n :votes-base :n-cmts :_id :user-vote-counts :consensus :pca :repness)</span>","value":"(:zid :group-votes :in-conv :group-clusters :base-clusters :lastVoteTimestamp :lastModTimestamp :n :votes-base :n-cmts :_id :user-vote-counts :consensus :pca :repness)"}
;; <=

;; @@
(def old-conv
  (-> mathresults
      (assoc :rating-mat (nm/named-matrix)
             :recompute :reboot)
      (update-in [:in-conv] set)))

(def cleaned-old-conv
  (hash-map-subset
    old-conv
    #{:rating-mat :lastVoteTimestamp :zid :pca :in-conv :n :n-cmnts :repness}))

;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;repness-debugging/cleaned-old-conv</span>","value":"#'repness-debugging/cleaned-old-conv"}
;; <=

;; @@
(def old-rep (:repness old-conv))
old-rep
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:0</span>","value":":0"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:tid</span>","value":":tid"},{"type":"html","content":"<span class='clj-unkown'>5</span>","value":"5"}],"value":"[:tid 5]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-success</span>","value":":n-success"},{"type":"html","content":"<span class='clj-unkown'>12</span>","value":"12"}],"value":"[:n-success 12]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-trials</span>","value":":n-trials"},{"type":"html","content":"<span class='clj-unkown'>12</span>","value":"12"}],"value":"[:n-trials 12]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-success</span>","value":":p-success"},{"type":"html","content":"<span class='clj-double'>0.9285714285714286</span>","value":"0.9285714285714286"}],"value":"[:p-success 0.9285714285714286]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-test</span>","value":":p-test"},{"type":"html","content":"<span class='clj-double'>3.605551275463989</span>","value":"3.605551275463989"}],"value":"[:p-test 3.605551275463989]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness</span>","value":":repness"},{"type":"html","content":"<span class='clj-double'>3.714285714285714</span>","value":"3.714285714285714"}],"value":"[:repness 3.714285714285714]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness-test</span>","value":":repness-test"},{"type":"html","content":"<span class='clj-double'>3.1471831798553467</span>","value":"3.1471831798553467"}],"value":"[:repness-test 3.1471831798553467]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repful-for</span>","value":":repful-for"},{"type":"html","content":"<span class='clj-string'>&quot;agree&quot;</span>","value":"\"agree\""}],"value":"[:repful-for \"agree\"]"}],"value":"{:tid 5, :n-success 12, :n-trials 12, :p-success 0.9285714285714286, :p-test 3.605551275463989, :repness 3.714285714285714, :repness-test 3.1471831798553467, :repful-for \"agree\"}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:tid</span>","value":":tid"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:tid 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-success</span>","value":":n-success"},{"type":"html","content":"<span class='clj-unkown'>15</span>","value":"15"}],"value":"[:n-success 15]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-trials</span>","value":":n-trials"},{"type":"html","content":"<span class='clj-unkown'>15</span>","value":"15"}],"value":"[:n-trials 15]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-success</span>","value":":p-success"},{"type":"html","content":"<span class='clj-double'>0.9411764705882353</span>","value":"0.9411764705882353"}],"value":"[:p-success 0.9411764705882353]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-test</span>","value":":p-test"},{"type":"html","content":"<span class='clj-unkown'>4</span>","value":"4"}],"value":"[:p-test 4]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness</span>","value":":repness"},{"type":"html","content":"<span class='clj-double'>1.882352941176471</span>","value":"1.882352941176471"}],"value":"[:repness 1.882352941176471]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness-test</span>","value":":repness-test"},{"type":"html","content":"<span class='clj-double'>2.3726840019226074</span>","value":"2.3726840019226074"}],"value":"[:repness-test 2.3726840019226074]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repful-for</span>","value":":repful-for"},{"type":"html","content":"<span class='clj-string'>&quot;agree&quot;</span>","value":"\"agree\""}],"value":"[:repful-for \"agree\"]"}],"value":"{:tid 1, :n-success 15, :n-trials 15, :p-success 0.9411764705882353, :p-test 4, :repness 1.882352941176471, :repness-test 2.3726840019226074, :repful-for \"agree\"}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:tid</span>","value":":tid"},{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"}],"value":"[:tid 2]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-success</span>","value":":n-success"},{"type":"html","content":"<span class='clj-unkown'>14</span>","value":"14"}],"value":"[:n-success 14]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-trials</span>","value":":n-trials"},{"type":"html","content":"<span class='clj-unkown'>14</span>","value":"14"}],"value":"[:n-trials 14]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-success</span>","value":":p-success"},{"type":"html","content":"<span class='clj-double'>0.9375</span>","value":"0.9375"}],"value":"[:p-success 0.9375]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-test</span>","value":":p-test"},{"type":"html","content":"<span class='clj-double'>3.872983346207417</span>","value":"3.872983346207417"}],"value":"[:p-test 3.872983346207417]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness</span>","value":":repness"},{"type":"html","content":"<span class='clj-double'>1.875</span>","value":"1.875"}],"value":"[:repness 1.875]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness-test</span>","value":":repness-test"},{"type":"html","content":"<span class='clj-double'>2.3008949756622314</span>","value":"2.3008949756622314"}],"value":"[:repness-test 2.3008949756622314]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repful-for</span>","value":":repful-for"},{"type":"html","content":"<span class='clj-string'>&quot;agree&quot;</span>","value":"\"agree\""}],"value":"[:repful-for \"agree\"]"}],"value":"{:tid 2, :n-success 14, :n-trials 14, :p-success 0.9375, :p-test 3.872983346207417, :repness 1.875, :repness-test 2.3008949756622314, :repful-for \"agree\"}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:tid</span>","value":":tid"},{"type":"html","content":"<span class='clj-unkown'>3</span>","value":"3"}],"value":"[:tid 3]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-success</span>","value":":n-success"},{"type":"html","content":"<span class='clj-unkown'>14</span>","value":"14"}],"value":"[:n-success 14]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-trials</span>","value":":n-trials"},{"type":"html","content":"<span class='clj-unkown'>15</span>","value":"15"}],"value":"[:n-trials 15]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-success</span>","value":":p-success"},{"type":"html","content":"<span class='clj-double'>0.8823529411764706</span>","value":"0.8823529411764706"}],"value":"[:p-success 0.8823529411764706]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-test</span>","value":":p-test"},{"type":"html","content":"<span class='clj-double'>3.5</span>","value":"3.5"}],"value":"[:p-test 3.5]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness</span>","value":":repness"},{"type":"html","content":"<span class='clj-double'>1.764705882352941</span>","value":"1.764705882352941"}],"value":"[:repness 1.764705882352941]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness-test</span>","value":":repness-test"},{"type":"html","content":"<span class='clj-double'>1.4026848077774048</span>","value":"1.4026848077774048"}],"value":"[:repness-test 1.4026848077774048]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repful-for</span>","value":":repful-for"},{"type":"html","content":"<span class='clj-string'>&quot;agree&quot;</span>","value":"\"agree\""}],"value":"[:repful-for \"agree\"]"}],"value":"{:tid 3, :n-success 14, :n-trials 15, :p-success 0.8823529411764706, :p-test 3.5, :repness 1.764705882352941, :repness-test 1.4026848077774048, :repful-for \"agree\"}"}],"value":"[{:tid 5, :n-success 12, :n-trials 12, :p-success 0.9285714285714286, :p-test 3.605551275463989, :repness 3.714285714285714, :repness-test 3.1471831798553467, :repful-for \"agree\"} {:tid 1, :n-success 15, :n-trials 15, :p-success 0.9411764705882353, :p-test 4, :repness 1.882352941176471, :repness-test 2.3726840019226074, :repful-for \"agree\"} {:tid 2, :n-success 14, :n-trials 14, :p-success 0.9375, :p-test 3.872983346207417, :repness 1.875, :repness-test 2.3008949756622314, :repful-for \"agree\"} {:tid 3, :n-success 14, :n-trials 15, :p-success 0.8823529411764706, :p-test 3.5, :repness 1.764705882352941, :repness-test 1.4026848077774048, :repful-for \"agree\"}]"}],"value":"[:0 [{:tid 5, :n-success 12, :n-trials 12, :p-success 0.9285714285714286, :p-test 3.605551275463989, :repness 3.714285714285714, :repness-test 3.1471831798553467, :repful-for \"agree\"} {:tid 1, :n-success 15, :n-trials 15, :p-success 0.9411764705882353, :p-test 4, :repness 1.882352941176471, :repness-test 2.3726840019226074, :repful-for \"agree\"} {:tid 2, :n-success 14, :n-trials 14, :p-success 0.9375, :p-test 3.872983346207417, :repness 1.875, :repness-test 2.3008949756622314, :repful-for \"agree\"} {:tid 3, :n-success 14, :n-trials 15, :p-success 0.8823529411764706, :p-test 3.5, :repness 1.764705882352941, :repness-test 1.4026848077774048, :repful-for \"agree\"}]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:1</span>","value":":1"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:tid</span>","value":":tid"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:tid 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-success</span>","value":":n-success"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:n-success 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-trials</span>","value":":n-trials"},{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"}],"value":"[:n-trials 2]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-success</span>","value":":p-success"},{"type":"html","content":"<span class='clj-double'>0.25</span>","value":"0.25"}],"value":"[:p-success 0.25]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-test</span>","value":":p-test"},{"type":"html","content":"<span class='clj-double'>-0.5773502691896258</span>","value":"-0.5773502691896258"}],"value":"[:p-test -0.5773502691896258]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness</span>","value":":repness"},{"type":"html","content":"<span class='clj-double'>4.25</span>","value":"4.25"}],"value":"[:repness 4.25]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness-test</span>","value":":repness-test"},{"type":"html","content":"<span class='clj-double'>1.4026848077774048</span>","value":"1.4026848077774048"}],"value":"[:repness-test 1.4026848077774048]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repful-for</span>","value":":repful-for"},{"type":"html","content":"<span class='clj-string'>&quot;disagree&quot;</span>","value":"\"disagree\""}],"value":"[:repful-for \"disagree\"]"}],"value":"{:tid 0, :n-success 0, :n-trials 2, :p-success 0.25, :p-test -0.5773502691896258, :repness 4.25, :repness-test 1.4026848077774048, :repful-for \"disagree\"}"}],"value":"[{:tid 0, :n-success 0, :n-trials 2, :p-success 0.25, :p-test -0.5773502691896258, :repness 4.25, :repness-test 1.4026848077774048, :repful-for \"disagree\"}]"}],"value":"[:1 [{:tid 0, :n-success 0, :n-trials 2, :p-success 0.25, :p-test -0.5773502691896258, :repness 4.25, :repness-test 1.4026848077774048, :repful-for \"disagree\"}]]"}],"value":"{:0 [{:tid 5, :n-success 12, :n-trials 12, :p-success 0.9285714285714286, :p-test 3.605551275463989, :repness 3.714285714285714, :repness-test 3.1471831798553467, :repful-for \"agree\"} {:tid 1, :n-success 15, :n-trials 15, :p-success 0.9411764705882353, :p-test 4, :repness 1.882352941176471, :repness-test 2.3726840019226074, :repful-for \"agree\"} {:tid 2, :n-success 14, :n-trials 14, :p-success 0.9375, :p-test 3.872983346207417, :repness 1.875, :repness-test 2.3008949756622314, :repful-for \"agree\"} {:tid 3, :n-success 14, :n-trials 15, :p-success 0.8823529411764706, :p-test 3.5, :repness 1.764705882352941, :repness-test 1.4026848077774048, :repful-for \"agree\"}], :1 [{:tid 0, :n-success 0, :n-trials 2, :p-success 0.25, :p-test -0.5773502691896258, :repness 4.25, :repness-test 1.4026848077774048, :repful-for \"disagree\"}]}"}
;; <=

;; @@
(keys old-rep)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>(:0 :1)</span>","value":"(:0 :1)"}
;; <=

;; @@
(keys old-conv)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>(:zid :group-votes :in-conv :group-clusters :base-clusters :rating-mat :lastVoteTimestamp :lastModTimestamp :n :votes-base :n-cmts :_id :user-vote-counts :consensus :pca :repness :recompute)</span>","value":"(:zid :group-votes :in-conv :group-clusters :base-clusters :rating-mat :lastVoteTimestamp :lastModTimestamp :n :votes-base :n-cmts :_id :user-vote-counts :consensus :pca :repness :recompute)"}
;; <=

;; @@
(:group-clusters old-conv)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:id 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-unkown'>3</span>","value":"3"},{"type":"html","content":"<span class='clj-unkown'>4</span>","value":"4"},{"type":"html","content":"<span class='clj-unkown'>5</span>","value":"5"},{"type":"html","content":"<span class='clj-unkown'>6</span>","value":"6"},{"type":"html","content":"<span class='clj-unkown'>7</span>","value":"7"},{"type":"html","content":"<span class='clj-unkown'>8</span>","value":"8"}],"value":"[0 3 4 5 6 7 8]"}],"value":"[:members [0 3 4 5 6 7 8]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.471088807370222</span>","value":"-0.471088807370222"},{"type":"html","content":"<span class='clj-double'>0.09169841854641742</span>","value":"0.09169841854641742"}],"value":"[-0.471088807370222 0.09169841854641742]"}],"value":"[:center [-0.471088807370222 0.09169841854641742]]"}],"value":"{:id 0, :members [0 3 4 5 6 7 8], :center [-0.471088807370222 0.09169841854641742]}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"}],"value":"[1 2]"}],"value":"[:members [1 2]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>0.7490063216462551</span>","value":"0.7490063216462551"},{"type":"html","content":"<span class='clj-double'>0.09423606439729555</span>","value":"0.09423606439729555"}],"value":"[0.7490063216462551 0.09423606439729555]"}],"value":"[:center [0.7490063216462551 0.09423606439729555]]"}],"value":"{:id 1, :members [1 2], :center [0.7490063216462551 0.09423606439729555]}"}],"value":"[{:id 0, :members [0 3 4 5 6 7 8], :center [-0.471088807370222 0.09169841854641742]} {:id 1, :members [1 2], :center [0.7490063216462551 0.09423606439729555]}]"}
;; <=

;; @@
(:base-clusters old-conv)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:count</span>","value":":count"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>8</span>","value":"8"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>4</span>","value":"4"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[8 1 1 4 1 1 1 1 1]"}],"value":"[:count [8 1 1 4 1 1 1 1 1]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-unkown'>10</span>","value":"10"},{"type":"html","content":"<span class='clj-unkown'>16</span>","value":"16"},{"type":"html","content":"<span class='clj-unkown'>21</span>","value":"21"},{"type":"html","content":"<span class='clj-unkown'>22</span>","value":"22"},{"type":"html","content":"<span class='clj-unkown'>38</span>","value":"38"},{"type":"html","content":"<span class='clj-unkown'>47</span>","value":"47"},{"type":"html","content":"<span class='clj-unkown'>49</span>","value":"49"}],"value":"[0 10 16 21 22 38 47 49]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"}],"value":"[2]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>23</span>","value":"23"}],"value":"[23]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>29</span>","value":"29"},{"type":"html","content":"<span class='clj-unkown'>51</span>","value":"51"},{"type":"html","content":"<span class='clj-unkown'>54</span>","value":"54"},{"type":"html","content":"<span class='clj-unkown'>57</span>","value":"57"}],"value":"[29 51 54 57]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>42</span>","value":"42"}],"value":"[42]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>43</span>","value":"43"}],"value":"[43]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>46</span>","value":"46"}],"value":"[46]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[1]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>7</span>","value":"7"}],"value":"[7]"}],"value":"[[0 10 16 21 22 38 47 49] [2] [23] [29 51 54 57] [42] [43] [46] [1] [7]]"}],"value":"[:members [[0 10 16 21 22 38 47 49] [2] [23] [29 51 54 57] [42] [43] [46] [1] [7]]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"},{"type":"html","content":"<span class='clj-unkown'>3</span>","value":"3"},{"type":"html","content":"<span class='clj-unkown'>4</span>","value":"4"},{"type":"html","content":"<span class='clj-unkown'>5</span>","value":"5"},{"type":"html","content":"<span class='clj-unkown'>6</span>","value":"6"},{"type":"html","content":"<span class='clj-unkown'>7</span>","value":"7"},{"type":"html","content":"<span class='clj-unkown'>8</span>","value":"8"}],"value":"[0 1 2 3 4 5 6 7 8]"}],"value":"[:id [0 1 2 3 4 5 6 7 8]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:y</span>","value":":y"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.10805193538717671</span>","value":"-0.10805193538717671"},{"type":"html","content":"<span class='clj-double'>-0.22850023939389771</span>","value":"-0.22850023939389771"},{"type":"html","content":"<span class='clj-double'>0.4169723681884888</span>","value":"0.4169723681884888"},{"type":"html","content":"<span class='clj-double'>0.5498037492242466</span>","value":"0.5498037492242466"},{"type":"html","content":"<span class='clj-double'>-0.07718390268876758</span>","value":"-0.07718390268876758"},{"type":"html","content":"<span class='clj-double'>0.39499875067857887</span>","value":"0.39499875067857887"},{"type":"html","content":"<span class='clj-double'>0.020216250609213664</span>","value":"0.020216250609213664"},{"type":"html","content":"<span class='clj-double'>0.07268908492332231</span>","value":"0.07268908492332231"},{"type":"html","content":"<span class='clj-double'>-0.18664658203282367</span>","value":"-0.18664658203282367"}],"value":"[-0.10805193538717671 -0.22850023939389771 0.4169723681884888 0.5498037492242466 -0.07718390268876758 0.39499875067857887 0.020216250609213664 0.07268908492332231 -0.18664658203282367]"}],"value":"[:y [-0.10805193538717671 -0.22850023939389771 0.4169723681884888 0.5498037492242466 -0.07718390268876758 0.39499875067857887 0.020216250609213664 0.07268908492332231 -0.18664658203282367]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:x</span>","value":":x"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.5945295579195796</span>","value":"-0.5945295579195796"},{"type":"html","content":"<span class='clj-double'>0.9722559194191575</span>","value":"0.9722559194191575"},{"type":"html","content":"<span class='clj-double'>0.5257567238733528</span>","value":"0.5257567238733528"},{"type":"html","content":"<span class='clj-double'>-0.6761205958741705</span>","value":"-0.6761205958741705"},{"type":"html","content":"<span class='clj-double'>-0.3577715772550172</span>","value":"-0.3577715772550172"},{"type":"html","content":"<span class='clj-double'>0.13568325080504204</span>","value":"0.13568325080504204"},{"type":"html","content":"<span class='clj-double'>-0.04160081100631029</span>","value":"-0.04160081100631029"},{"type":"html","content":"<span class='clj-double'>-0.08904659359960015</span>","value":"-0.08904659359960015"},{"type":"html","content":"<span class='clj-double'>-0.19505514738456922</span>","value":"-0.19505514738456922"}],"value":"[-0.5945295579195796 0.9722559194191575 0.5257567238733528 -0.6761205958741705 -0.3577715772550172 0.13568325080504204 -0.04160081100631029 -0.08904659359960015 -0.19505514738456922]"}],"value":"[:x [-0.5945295579195796 0.9722559194191575 0.5257567238733528 -0.6761205958741705 -0.3577715772550172 0.13568325080504204 -0.04160081100631029 -0.08904659359960015 -0.19505514738456922]]"}],"value":"{:count [8 1 1 4 1 1 1 1 1], :members [[0 10 16 21 22 38 47 49] [2] [23] [29 51 54 57] [42] [43] [46] [1] [7]], :id [0 1 2 3 4 5 6 7 8], :y [-0.10805193538717671 -0.22850023939389771 0.4169723681884888 0.5498037492242466 -0.07718390268876758 0.39499875067857887 0.020216250609213664 0.07268908492332231 -0.18664658203282367], :x [-0.5945295579195796 0.9722559194191575 0.5257567238733528 -0.6761205958741705 -0.3577715772550172 0.13568325080504204 -0.04160081100631029 -0.08904659359960015 -0.19505514738456922]}"}
;; <=

;; **
;;; OK; let's take a step back... we're sort of getting carried down the rabbit hole here. Let's focus on what we acutally need/want to do. We need to be able to test the `conv-repness` function, and the `select-rep-comments` function. The former needs `rating-mat`, `group-clusters` and `base-clusters`, while the latter needs the results of the former and `mod-out` comments. Nothing has been modded out in this case, so we really just need the former things. However, these things are sort of encoded in the mongoified version, and we need to get them out.
;; **

;; @@
(def new-conv (pconv/conv-update cleaned-old-conv votes))
(println "N ptpts" (:n new-conv))
(println "n group clusts" (count (:group-clusters new-conv)))
;; @@
;; ->
;;; N ptpts 20
;;; n group clusts 2
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
((:repness new-conv) 1)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:tid</span>","value":":tid"},{"type":"html","content":"<span class='clj-long'>4</span>","value":"4"}],"value":"[:tid 4]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-success</span>","value":":n-success"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:n-success 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-trials</span>","value":":n-trials"},{"type":"html","content":"<span class='clj-unkown'>6</span>","value":"6"}],"value":"[:n-trials 6]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-success</span>","value":":p-success"},{"type":"html","content":"<span class='clj-ratio'>1/8</span>","value":"1/8"}],"value":"[:p-success 1/8]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-test</span>","value":":p-test"},{"type":"html","content":"<span class='clj-double'>-1.8898223650461359</span>","value":"-1.8898223650461359"}],"value":"[:p-test -1.8898223650461359]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness</span>","value":":repness"},{"type":"html","content":"<span class='clj-ratio'>15/8</span>","value":"15/8"}],"value":"[:repness 15/8]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness-test</span>","value":":repness-test"},{"type":"html","content":"<span class='clj-unkown'>0.5256575</span>","value":"0.5256575"}],"value":"[:repness-test 0.5256575]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repful-for</span>","value":":repful-for"},{"type":"html","content":"<span class='clj-keyword'>:disagree</span>","value":":disagree"}],"value":"[:repful-for :disagree]"}],"value":"{:tid 4, :n-success 0, :n-trials 6, :p-success 1/8, :p-test -1.8898223650461359, :repness 15/8, :repness-test 0.5256575, :repful-for :disagree}"}],"value":"[{:tid 4, :n-success 0, :n-trials 6, :p-success 1/8, :p-test -1.8898223650461359, :repness 15/8, :repness-test 0.5256575, :repful-for :disagree}]"}
;; <=

;; **
;;; OK; well, this seems to be a different "weird" one than for the old state of the old-conv. But it's still weird and doesn't look right:
;; **

;; @@
(:1 (:repness old-conv))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:tid</span>","value":":tid"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:tid 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-success</span>","value":":n-success"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:n-success 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:n-trials</span>","value":":n-trials"},{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"}],"value":"[:n-trials 2]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-success</span>","value":":p-success"},{"type":"html","content":"<span class='clj-double'>0.25</span>","value":"0.25"}],"value":"[:p-success 0.25]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:p-test</span>","value":":p-test"},{"type":"html","content":"<span class='clj-double'>-0.5773502691896258</span>","value":"-0.5773502691896258"}],"value":"[:p-test -0.5773502691896258]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness</span>","value":":repness"},{"type":"html","content":"<span class='clj-double'>4.25</span>","value":"4.25"}],"value":"[:repness 4.25]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repness-test</span>","value":":repness-test"},{"type":"html","content":"<span class='clj-double'>1.4026848077774048</span>","value":"1.4026848077774048"}],"value":"[:repness-test 1.4026848077774048]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:repful-for</span>","value":":repful-for"},{"type":"html","content":"<span class='clj-string'>&quot;disagree&quot;</span>","value":"\"disagree\""}],"value":"[:repful-for \"disagree\"]"}],"value":"{:tid 0, :n-success 0, :n-trials 2, :p-success 0.25, :p-test -0.5773502691896258, :repness 4.25, :repness-test 1.4026848077774048, :repful-for \"disagree\"}"}],"value":"[{:tid 0, :n-success 0, :n-trials 2, :p-success 0.25, :p-test -0.5773502691896258, :repness 4.25, :repness-test 1.4026848077774048, :repful-for \"disagree\"}]"}
;; <=

;; **
;;; Getting off track again... Really need to look at getting the old base and group clusters into the same shape as they need to to go into the repness.
;; **

;; @@
(:group-clusters old-conv)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:id 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-unkown'>3</span>","value":"3"},{"type":"html","content":"<span class='clj-unkown'>4</span>","value":"4"},{"type":"html","content":"<span class='clj-unkown'>5</span>","value":"5"},{"type":"html","content":"<span class='clj-unkown'>6</span>","value":"6"},{"type":"html","content":"<span class='clj-unkown'>7</span>","value":"7"},{"type":"html","content":"<span class='clj-unkown'>8</span>","value":"8"}],"value":"[0 3 4 5 6 7 8]"}],"value":"[:members [0 3 4 5 6 7 8]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.471088807370222</span>","value":"-0.471088807370222"},{"type":"html","content":"<span class='clj-double'>0.09169841854641742</span>","value":"0.09169841854641742"}],"value":"[-0.471088807370222 0.09169841854641742]"}],"value":"[:center [-0.471088807370222 0.09169841854641742]]"}],"value":"{:id 0, :members [0 3 4 5 6 7 8], :center [-0.471088807370222 0.09169841854641742]}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"}],"value":"[1 2]"}],"value":"[:members [1 2]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>0.7490063216462551</span>","value":"0.7490063216462551"},{"type":"html","content":"<span class='clj-double'>0.09423606439729555</span>","value":"0.09423606439729555"}],"value":"[0.7490063216462551 0.09423606439729555]"}],"value":"[:center [0.7490063216462551 0.09423606439729555]]"}],"value":"{:id 1, :members [1 2], :center [0.7490063216462551 0.09423606439729555]}"}],"value":"[{:id 0, :members [0 3 4 5 6 7 8], :center [-0.471088807370222 0.09169841854641742]} {:id 1, :members [1 2], :center [0.7490063216462551 0.09423606439729555]}]"}
;; <=

;; @@
(:group-clusters new-conv)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-list'>(</span>","close":"<span class='clj-list'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"}],"value":"[:id 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>5</span>","value":"5"},{"type":"html","content":"<span class='clj-long'>8</span>","value":"8"}],"value":"[0 5 8]"}],"value":"[:members [0 5 8]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"html","content":"<span class='clj-unkown'>#mikera.vectorz.Vector [-0.6014223403441702 0.09478667197588349]</span>","value":"#mikera.vectorz.Vector [-0.6014223403441702 0.09478667197588349]"}],"value":"[:center #mikera.vectorz.Vector [-0.6014223403441702 0.09478667197588349]]"}],"value":"{:id 0, :members [0 5 8], :center #mikera.vectorz.Vector [-0.6014223403441702 0.09478667197588349]}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[:id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-long'>2</span>","value":"2"},{"type":"html","content":"<span class='clj-long'>3</span>","value":"3"},{"type":"html","content":"<span class='clj-long'>4</span>","value":"4"},{"type":"html","content":"<span class='clj-long'>6</span>","value":"6"},{"type":"html","content":"<span class='clj-long'>7</span>","value":"7"}],"value":"[1 2 3 4 6 7]"}],"value":"[:members [1 2 3 4 6 7]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"html","content":"<span class='clj-unkown'>#mikera.vectorz.Vector [0.21799889033792041 0.08354785830729558]</span>","value":"#mikera.vectorz.Vector [0.21799889033792041 0.08354785830729558]"}],"value":"[:center #mikera.vectorz.Vector [0.21799889033792041 0.08354785830729558]]"}],"value":"{:id 1, :members [1 2 3 4 6 7], :center #mikera.vectorz.Vector [0.21799889033792041 0.08354785830729558]}"}],"value":"({:id 0, :members [0 5 8], :center #mikera.vectorz.Vector [-0.6014223403441702 0.09478667197588349]} {:id 1, :members [1 2 3 4 6 7], :center #mikera.vectorz.Vector [0.21799889033792041 0.08354785830729558]})"}
;; <=

;; **
;;; OK; so the group clusters are the same enough. I think we just need to get the base clusters to be the same then. This _should_ all just depend on the `:member` values really, so let's create an `unfold-clusters` function that does this.
;; **

;; @@
(:base-clusters old-conv)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:count</span>","value":":count"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>8</span>","value":"8"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>4</span>","value":"4"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[8 1 1 4 1 1 1 1 1]"}],"value":"[:count [8 1 1 4 1 1 1 1 1]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-unkown'>10</span>","value":"10"},{"type":"html","content":"<span class='clj-unkown'>16</span>","value":"16"},{"type":"html","content":"<span class='clj-unkown'>21</span>","value":"21"},{"type":"html","content":"<span class='clj-unkown'>22</span>","value":"22"},{"type":"html","content":"<span class='clj-unkown'>38</span>","value":"38"},{"type":"html","content":"<span class='clj-unkown'>47</span>","value":"47"},{"type":"html","content":"<span class='clj-unkown'>49</span>","value":"49"}],"value":"[0 10 16 21 22 38 47 49]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"}],"value":"[2]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>23</span>","value":"23"}],"value":"[23]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>29</span>","value":"29"},{"type":"html","content":"<span class='clj-unkown'>51</span>","value":"51"},{"type":"html","content":"<span class='clj-unkown'>54</span>","value":"54"},{"type":"html","content":"<span class='clj-unkown'>57</span>","value":"57"}],"value":"[29 51 54 57]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>42</span>","value":"42"}],"value":"[42]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>43</span>","value":"43"}],"value":"[43]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>46</span>","value":"46"}],"value":"[46]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[1]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>7</span>","value":"7"}],"value":"[7]"}],"value":"[[0 10 16 21 22 38 47 49] [2] [23] [29 51 54 57] [42] [43] [46] [1] [7]]"}],"value":"[:members [[0 10 16 21 22 38 47 49] [2] [23] [29 51 54 57] [42] [43] [46] [1] [7]]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"},{"type":"html","content":"<span class='clj-unkown'>3</span>","value":"3"},{"type":"html","content":"<span class='clj-unkown'>4</span>","value":"4"},{"type":"html","content":"<span class='clj-unkown'>5</span>","value":"5"},{"type":"html","content":"<span class='clj-unkown'>6</span>","value":"6"},{"type":"html","content":"<span class='clj-unkown'>7</span>","value":"7"},{"type":"html","content":"<span class='clj-unkown'>8</span>","value":"8"}],"value":"[0 1 2 3 4 5 6 7 8]"}],"value":"[:id [0 1 2 3 4 5 6 7 8]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:y</span>","value":":y"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.10805193538717671</span>","value":"-0.10805193538717671"},{"type":"html","content":"<span class='clj-double'>-0.22850023939389771</span>","value":"-0.22850023939389771"},{"type":"html","content":"<span class='clj-double'>0.4169723681884888</span>","value":"0.4169723681884888"},{"type":"html","content":"<span class='clj-double'>0.5498037492242466</span>","value":"0.5498037492242466"},{"type":"html","content":"<span class='clj-double'>-0.07718390268876758</span>","value":"-0.07718390268876758"},{"type":"html","content":"<span class='clj-double'>0.39499875067857887</span>","value":"0.39499875067857887"},{"type":"html","content":"<span class='clj-double'>0.020216250609213664</span>","value":"0.020216250609213664"},{"type":"html","content":"<span class='clj-double'>0.07268908492332231</span>","value":"0.07268908492332231"},{"type":"html","content":"<span class='clj-double'>-0.18664658203282367</span>","value":"-0.18664658203282367"}],"value":"[-0.10805193538717671 -0.22850023939389771 0.4169723681884888 0.5498037492242466 -0.07718390268876758 0.39499875067857887 0.020216250609213664 0.07268908492332231 -0.18664658203282367]"}],"value":"[:y [-0.10805193538717671 -0.22850023939389771 0.4169723681884888 0.5498037492242466 -0.07718390268876758 0.39499875067857887 0.020216250609213664 0.07268908492332231 -0.18664658203282367]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:x</span>","value":":x"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.5945295579195796</span>","value":"-0.5945295579195796"},{"type":"html","content":"<span class='clj-double'>0.9722559194191575</span>","value":"0.9722559194191575"},{"type":"html","content":"<span class='clj-double'>0.5257567238733528</span>","value":"0.5257567238733528"},{"type":"html","content":"<span class='clj-double'>-0.6761205958741705</span>","value":"-0.6761205958741705"},{"type":"html","content":"<span class='clj-double'>-0.3577715772550172</span>","value":"-0.3577715772550172"},{"type":"html","content":"<span class='clj-double'>0.13568325080504204</span>","value":"0.13568325080504204"},{"type":"html","content":"<span class='clj-double'>-0.04160081100631029</span>","value":"-0.04160081100631029"},{"type":"html","content":"<span class='clj-double'>-0.08904659359960015</span>","value":"-0.08904659359960015"},{"type":"html","content":"<span class='clj-double'>-0.19505514738456922</span>","value":"-0.19505514738456922"}],"value":"[-0.5945295579195796 0.9722559194191575 0.5257567238733528 -0.6761205958741705 -0.3577715772550172 0.13568325080504204 -0.04160081100631029 -0.08904659359960015 -0.19505514738456922]"}],"value":"[:x [-0.5945295579195796 0.9722559194191575 0.5257567238733528 -0.6761205958741705 -0.3577715772550172 0.13568325080504204 -0.04160081100631029 -0.08904659359960015 -0.19505514738456922]]"}],"value":"{:count [8 1 1 4 1 1 1 1 1], :members [[0 10 16 21 22 38 47 49] [2] [23] [29 51 54 57] [42] [43] [46] [1] [7]], :id [0 1 2 3 4 5 6 7 8], :y [-0.10805193538717671 -0.22850023939389771 0.4169723681884888 0.5498037492242466 -0.07718390268876758 0.39499875067857887 0.020216250609213664 0.07268908492332231 -0.18664658203282367], :x [-0.5945295579195796 0.9722559194191575 0.5257567238733528 -0.6761205958741705 -0.3577715772550172 0.13568325080504204 -0.04160081100631029 -0.08904659359960015 -0.19505514738456922]}"}
;; <=

;; @@
(defn unfold-clusters
  [{:keys [members id x y] :as mongo-clusters}]
  (map
    (fn [ms id x y]
      {:id id
       :members ms
       :center [x y]})
    members
    id
    x
    y))
(unfold-clusters (:base-clusters old-conv))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:id 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-unkown'>10</span>","value":"10"},{"type":"html","content":"<span class='clj-unkown'>16</span>","value":"16"},{"type":"html","content":"<span class='clj-unkown'>21</span>","value":"21"},{"type":"html","content":"<span class='clj-unkown'>22</span>","value":"22"},{"type":"html","content":"<span class='clj-unkown'>38</span>","value":"38"},{"type":"html","content":"<span class='clj-unkown'>47</span>","value":"47"},{"type":"html","content":"<span class='clj-unkown'>49</span>","value":"49"}],"value":"[0 10 16 21 22 38 47 49]"}],"value":"[:members [0 10 16 21 22 38 47 49]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.5945295579195796</span>","value":"-0.5945295579195796"},{"type":"html","content":"<span class='clj-double'>-0.10805193538717671</span>","value":"-0.10805193538717671"}],"value":"[-0.5945295579195796 -0.10805193538717671]"}],"value":"[:center [-0.5945295579195796 -0.10805193538717671]]"}],"value":"{:id 0, :members [0 10 16 21 22 38 47 49], :center [-0.5945295579195796 -0.10805193538717671]}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"}],"value":"[2]"}],"value":"[:members [2]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>0.9722559194191575</span>","value":"0.9722559194191575"},{"type":"html","content":"<span class='clj-double'>-0.22850023939389771</span>","value":"-0.22850023939389771"}],"value":"[0.9722559194191575 -0.22850023939389771]"}],"value":"[:center [0.9722559194191575 -0.22850023939389771]]"}],"value":"{:id 1, :members [2], :center [0.9722559194191575 -0.22850023939389771]}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"}],"value":"[:id 2]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>23</span>","value":"23"}],"value":"[23]"}],"value":"[:members [23]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>0.5257567238733528</span>","value":"0.5257567238733528"},{"type":"html","content":"<span class='clj-double'>0.4169723681884888</span>","value":"0.4169723681884888"}],"value":"[0.5257567238733528 0.4169723681884888]"}],"value":"[:center [0.5257567238733528 0.4169723681884888]]"}],"value":"{:id 2, :members [23], :center [0.5257567238733528 0.4169723681884888]}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>3</span>","value":"3"}],"value":"[:id 3]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>29</span>","value":"29"},{"type":"html","content":"<span class='clj-unkown'>51</span>","value":"51"},{"type":"html","content":"<span class='clj-unkown'>54</span>","value":"54"},{"type":"html","content":"<span class='clj-unkown'>57</span>","value":"57"}],"value":"[29 51 54 57]"}],"value":"[:members [29 51 54 57]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.6761205958741705</span>","value":"-0.6761205958741705"},{"type":"html","content":"<span class='clj-double'>0.5498037492242466</span>","value":"0.5498037492242466"}],"value":"[-0.6761205958741705 0.5498037492242466]"}],"value":"[:center [-0.6761205958741705 0.5498037492242466]]"}],"value":"{:id 3, :members [29 51 54 57], :center [-0.6761205958741705 0.5498037492242466]}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>4</span>","value":"4"}],"value":"[:id 4]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>42</span>","value":"42"}],"value":"[42]"}],"value":"[:members [42]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.3577715772550172</span>","value":"-0.3577715772550172"},{"type":"html","content":"<span class='clj-double'>-0.07718390268876758</span>","value":"-0.07718390268876758"}],"value":"[-0.3577715772550172 -0.07718390268876758]"}],"value":"[:center [-0.3577715772550172 -0.07718390268876758]]"}],"value":"{:id 4, :members [42], :center [-0.3577715772550172 -0.07718390268876758]}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>5</span>","value":"5"}],"value":"[:id 5]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>43</span>","value":"43"}],"value":"[43]"}],"value":"[:members [43]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>0.13568325080504204</span>","value":"0.13568325080504204"},{"type":"html","content":"<span class='clj-double'>0.39499875067857887</span>","value":"0.39499875067857887"}],"value":"[0.13568325080504204 0.39499875067857887]"}],"value":"[:center [0.13568325080504204 0.39499875067857887]]"}],"value":"{:id 5, :members [43], :center [0.13568325080504204 0.39499875067857887]}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>6</span>","value":"6"}],"value":"[:id 6]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>46</span>","value":"46"}],"value":"[46]"}],"value":"[:members [46]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.04160081100631029</span>","value":"-0.04160081100631029"},{"type":"html","content":"<span class='clj-double'>0.020216250609213664</span>","value":"0.020216250609213664"}],"value":"[-0.04160081100631029 0.020216250609213664]"}],"value":"[:center [-0.04160081100631029 0.020216250609213664]]"}],"value":"{:id 6, :members [46], :center [-0.04160081100631029 0.020216250609213664]}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>7</span>","value":"7"}],"value":"[:id 7]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[1]"}],"value":"[:members [1]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.08904659359960015</span>","value":"-0.08904659359960015"},{"type":"html","content":"<span class='clj-double'>0.07268908492332231</span>","value":"0.07268908492332231"}],"value":"[-0.08904659359960015 0.07268908492332231]"}],"value":"[:center [-0.08904659359960015 0.07268908492332231]]"}],"value":"{:id 7, :members [1], :center [-0.08904659359960015 0.07268908492332231]}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>8</span>","value":"8"}],"value":"[:id 8]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:members</span>","value":":members"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-unkown'>7</span>","value":"7"}],"value":"[7]"}],"value":"[:members [7]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:center</span>","value":":center"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.19505514738456922</span>","value":"-0.19505514738456922"},{"type":"html","content":"<span class='clj-double'>-0.18664658203282367</span>","value":"-0.18664658203282367"}],"value":"[-0.19505514738456922 -0.18664658203282367]"}],"value":"[:center [-0.19505514738456922 -0.18664658203282367]]"}],"value":"{:id 8, :members [7], :center [-0.19505514738456922 -0.18664658203282367]}"}],"value":"({:id 0, :members [0 10 16 21 22 38 47 49], :center [-0.5945295579195796 -0.10805193538717671]} {:id 1, :members [2], :center [0.9722559194191575 -0.22850023939389771]} {:id 2, :members [23], :center [0.5257567238733528 0.4169723681884888]} {:id 3, :members [29 51 54 57], :center [-0.6761205958741705 0.5498037492242466]} {:id 4, :members [42], :center [-0.3577715772550172 -0.07718390268876758]} {:id 5, :members [43], :center [0.13568325080504204 0.39499875067857887]} {:id 6, :members [46], :center [-0.04160081100631029 0.020216250609213664]} {:id 7, :members [1], :center [-0.08904659359960015 0.07268908492332231]} {:id 8, :members [7], :center [-0.19505514738456922 -0.18664658203282367]})"}
;; <=

;; **
;;; Oh duh; this is the same as the base clusters for the `new-conv`. Oh well, will be good to get this function in to the production code somewhere for reloads anyway (**XXX**). 
;;; 
;;; In any case, moving along, let's first get our raw repness data so we can start tinkering with the filtering/selection function.
;; **

;; @@
(def rating-mat (:rating-mat new-conv))
rating-mat
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>#polismath.named-matrix.NamedMatrix {:rownames [0 1 2 7 10 16 21 22 23 38 42 43 47 49 46 51 29 54 57 58] :colnames [0 1 2 3 4 5 6] :matrix [[-1 -1 -1 -1 -1 -1 nil] [nil -1 nil nil -1 nil nil] [-1 0 0 -1 -1 0 nil] [nil nil nil -1 -1 nil nil] [-1 -1 -1 -1 -1 -1 nil] [-1 -1 -1 -1 -1 -1 nil] [-1 -1 -1 -1 -1 -1 nil] [-1 -1 -1 -1 -1 -1 nil] [-1 -1 -1 0 -1 0 nil] [-1 -1 -1 -1 -1 -1 nil] [-1 -1 -1 -1 -1 nil nil] [-1 -1 -1 0 -1 nil nil] [-1 -1 -1 -1 -1 -1 nil] [-1 -1 -1 -1 -1 -1 nil] [-1 nil nil nil -1 nil nil] [-1 -1 -1 -1 -1 -1 -1] [-1 -1 -1 -1 -1 -1 -1] [-1 -1 -1 -1 -1 -1 -1] [-1 -1 -1 -1 -1 -1 -1] [-1 -1 0 nil -1 nil -1]]}</span>","value":"#polismath.named-matrix.NamedMatrix {:rownames [0 1 2 7 10 16 21 22 23 38 42 43 47 49 46 51 29 54 57 58] :colnames [0 1 2 3 4 5 6] :matrix [[-1 -1 -1 -1 -1 -1 nil] [nil -1 nil nil -1 nil nil] [-1 0 0 -1 -1 0 nil] [nil nil nil -1 -1 nil nil] [-1 -1 -1 -1 -1 -1 nil] [-1 -1 -1 -1 -1 -1 nil] [-1 -1 -1 -1 -1 -1 nil] [-1 -1 -1 -1 -1 -1 nil] [-1 -1 -1 0 -1 0 nil] [-1 -1 -1 -1 -1 -1 nil] [-1 -1 -1 -1 -1 nil nil] [-1 -1 -1 0 -1 nil nil] [-1 -1 -1 -1 -1 -1 nil] [-1 -1 -1 -1 -1 -1 nil] [-1 nil nil nil -1 nil nil] [-1 -1 -1 -1 -1 -1 -1] [-1 -1 -1 -1 -1 -1 -1] [-1 -1 -1 -1 -1 -1 -1] [-1 -1 -1 -1 -1 -1 -1] [-1 -1 0 nil -1 nil -1]]}"}
;; <=

;; @@
(def repness (pclst/conv-repness rating-mat (:group-clusters old-conv) (:base-clusters new-conv)))
(ppp/wide-pp repness)
;; @@
;; ->
;;; {:ids (0 1),
;;;  :stats
;;;  ([{:pat 4.123105625617661, :pd 1/18, :pa 17/18, :na 16, :pdt -3.6380343755449944, :nd 0, :ns 16, :rdt -1.9230436515620617, :rat 0, :rd 1/6, :ra 17/12} {:pat 1.4142135623730951, :pd 1/3, :pa 2/3, :na 1, :pdt 0.0, :nd 0, :ns 1, :rdt 1.9230436515620617, :rat 0, :rd 6N, :ra 12/17}]
;;;   [{:pat 4.0, :pd 1/17, :pa 16/17, :na 15, :pdt -3.5, :nd 0, :ns 15, :rdt -1.402684750684886, :rat 2.3726840560069578, :rd 4/17, :ra 32/17} {:pat 0.577350269189626, :pd 1/4, :pa 1/2, :na 1, :pdt -0.5773502691896258, :nd 0, :ns 2, :rdt 1.402684750684886, :rat -2.3726840560069578, :rd 17/4, :ra 17/32}]
;;;   [{:pat 4.0, :pd 1/17, :pa 16/17, :na 15, :pdt -3.5, :nd 0, :ns 15, :rdt -1.8561553006146874, :rat 2.9104275004359956, :rd 3/17, :ra 48/17} {:pat 0.0, :pd 1/3, :pa 1/3, :na 0, :pdt 0.0, :nd 0, :ns 1, :rdt 1.8561553006146874, :rat -2.9104275004359956, :rd 17/3, :ra 17/48}]
;;;   [{:pat 3.1529631254723283, :pd 1/18, :pa 5/6, :na 14, :pdt -3.6380343755449944, :nd 0, :ns 16, :rdt -1.9230436515620617, :rat -0.5128116404165497, :rd 1/6, :ra 5/4} {:pat 1.4142135623730951, :pd 1/3, :pa 2/3, :na 1, :pdt 0.0, :nd 0, :ns 1, :rdt 1.9230436515620617, :rat 0.5128116404165497, :rd 6N, :ra 4/5}]
;;;   [{:pat 4.242640687119285, :pd 1/19, :pa 18/19, :na 17, :pdt -3.771236166328253, :nd 0, :ns 17, :rdt -1.51744244666721, :rat 0, :rd 4/19, :ra 24/19} {:pat 1.7320508075688772, :pd 1/4, :pa 3/4, :na 2, :pdt -0.5773502691896258, :nd 0, :ns 2, :rdt 1.51744244666721, :rat 0, :rd 19/4, :ra 19/24}]
;;;   [{:pat 3.2071349029490928, :pd 1/15, :pa 13/15, :na 12, :pdt -3.2071349029490928, :nd 0, :ns 13, :rdt -1.7142857142857144, :rat 1.7142857142857144, :rd 1/5, :ra 13/5} {:pat 0.0, :pd 1/3, :pa 1/3, :na 0, :pdt 0.0, :nd 0, :ns 1, :rdt 1.7142857142857144, :rat -1.7142857142857144, :rd 5N, :ra 5/13}]
;;;   [{:pat 2.23606797749979, :pd 1/6, :pa 5/6, :na 4, :pdt -1.3416407864998738, :nd 0, :ns 4, :rdt -1.5491933384829666, :rat 0, :rd 1/3, :ra 5/3} {:pat 1.0, :pd 1/2, :pa 1/2, :na 0, :pdt 1.0, :nd 0, :ns 0, :rdt 1.5491933384829666, :rat 0, :rd 3N, :ra 3/5}])}
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
(map second (:stats repness))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pat</span>","value":":pat"},{"type":"html","content":"<span class='clj-double'>1.4142135623730951</span>","value":"1.4142135623730951"}],"value":"[:pat 1.4142135623730951]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pd</span>","value":":pd"},{"type":"html","content":"<span class='clj-ratio'>1/3</span>","value":"1/3"}],"value":"[:pd 1/3]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pa</span>","value":":pa"},{"type":"html","content":"<span class='clj-ratio'>2/3</span>","value":"2/3"}],"value":"[:pa 2/3]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:na</span>","value":":na"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:na 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pdt</span>","value":":pdt"},{"type":"html","content":"<span class='clj-double'>0.0</span>","value":"0.0"}],"value":"[:pdt 0.0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:nd</span>","value":":nd"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:nd 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ns</span>","value":":ns"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:ns 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rdt</span>","value":":rdt"},{"type":"html","content":"<span class='clj-double'>1.9230436515620617</span>","value":"1.9230436515620617"}],"value":"[:rdt 1.9230436515620617]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rat</span>","value":":rat"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"}],"value":"[:rat 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rd</span>","value":":rd"},{"type":"html","content":"<span class='clj-bigint'>6N</span>","value":"6N"}],"value":"[:rd 6N]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ra</span>","value":":ra"},{"type":"html","content":"<span class='clj-ratio'>12/17</span>","value":"12/17"}],"value":"[:ra 12/17]"}],"value":"#polismath.clusters.graph-record42373{:pat 1.4142135623730951, :pd 1/3, :pa 2/3, :na 1, :pdt 0.0, :nd 0, :ns 1, :rdt 1.9230436515620617, :rat 0, :rd 6N, :ra 12/17}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pat</span>","value":":pat"},{"type":"html","content":"<span class='clj-double'>0.577350269189626</span>","value":"0.577350269189626"}],"value":"[:pat 0.577350269189626]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pd</span>","value":":pd"},{"type":"html","content":"<span class='clj-ratio'>1/4</span>","value":"1/4"}],"value":"[:pd 1/4]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pa</span>","value":":pa"},{"type":"html","content":"<span class='clj-ratio'>1/2</span>","value":"1/2"}],"value":"[:pa 1/2]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:na</span>","value":":na"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:na 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pdt</span>","value":":pdt"},{"type":"html","content":"<span class='clj-double'>-0.5773502691896258</span>","value":"-0.5773502691896258"}],"value":"[:pdt -0.5773502691896258]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:nd</span>","value":":nd"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:nd 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ns</span>","value":":ns"},{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"}],"value":"[:ns 2]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rdt</span>","value":":rdt"},{"type":"html","content":"<span class='clj-double'>1.402684750684886</span>","value":"1.402684750684886"}],"value":"[:rdt 1.402684750684886]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rat</span>","value":":rat"},{"type":"html","content":"<span class='clj-double'>-2.3726840560069578</span>","value":"-2.3726840560069578"}],"value":"[:rat -2.3726840560069578]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rd</span>","value":":rd"},{"type":"html","content":"<span class='clj-ratio'>17/4</span>","value":"17/4"}],"value":"[:rd 17/4]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ra</span>","value":":ra"},{"type":"html","content":"<span class='clj-ratio'>17/32</span>","value":"17/32"}],"value":"[:ra 17/32]"}],"value":"#polismath.clusters.graph-record42373{:pat 0.577350269189626, :pd 1/4, :pa 1/2, :na 1, :pdt -0.5773502691896258, :nd 0, :ns 2, :rdt 1.402684750684886, :rat -2.3726840560069578, :rd 17/4, :ra 17/32}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pat</span>","value":":pat"},{"type":"html","content":"<span class='clj-double'>0.0</span>","value":"0.0"}],"value":"[:pat 0.0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pd</span>","value":":pd"},{"type":"html","content":"<span class='clj-ratio'>1/3</span>","value":"1/3"}],"value":"[:pd 1/3]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pa</span>","value":":pa"},{"type":"html","content":"<span class='clj-ratio'>1/3</span>","value":"1/3"}],"value":"[:pa 1/3]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:na</span>","value":":na"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:na 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pdt</span>","value":":pdt"},{"type":"html","content":"<span class='clj-double'>0.0</span>","value":"0.0"}],"value":"[:pdt 0.0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:nd</span>","value":":nd"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:nd 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ns</span>","value":":ns"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:ns 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rdt</span>","value":":rdt"},{"type":"html","content":"<span class='clj-double'>1.8561553006146874</span>","value":"1.8561553006146874"}],"value":"[:rdt 1.8561553006146874]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rat</span>","value":":rat"},{"type":"html","content":"<span class='clj-double'>-2.9104275004359956</span>","value":"-2.9104275004359956"}],"value":"[:rat -2.9104275004359956]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rd</span>","value":":rd"},{"type":"html","content":"<span class='clj-ratio'>17/3</span>","value":"17/3"}],"value":"[:rd 17/3]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ra</span>","value":":ra"},{"type":"html","content":"<span class='clj-ratio'>17/48</span>","value":"17/48"}],"value":"[:ra 17/48]"}],"value":"#polismath.clusters.graph-record42373{:pat 0.0, :pd 1/3, :pa 1/3, :na 0, :pdt 0.0, :nd 0, :ns 1, :rdt 1.8561553006146874, :rat -2.9104275004359956, :rd 17/3, :ra 17/48}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pat</span>","value":":pat"},{"type":"html","content":"<span class='clj-double'>1.4142135623730951</span>","value":"1.4142135623730951"}],"value":"[:pat 1.4142135623730951]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pd</span>","value":":pd"},{"type":"html","content":"<span class='clj-ratio'>1/3</span>","value":"1/3"}],"value":"[:pd 1/3]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pa</span>","value":":pa"},{"type":"html","content":"<span class='clj-ratio'>2/3</span>","value":"2/3"}],"value":"[:pa 2/3]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:na</span>","value":":na"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:na 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pdt</span>","value":":pdt"},{"type":"html","content":"<span class='clj-double'>0.0</span>","value":"0.0"}],"value":"[:pdt 0.0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:nd</span>","value":":nd"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:nd 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ns</span>","value":":ns"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:ns 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rdt</span>","value":":rdt"},{"type":"html","content":"<span class='clj-double'>1.9230436515620617</span>","value":"1.9230436515620617"}],"value":"[:rdt 1.9230436515620617]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rat</span>","value":":rat"},{"type":"html","content":"<span class='clj-double'>0.5128116404165497</span>","value":"0.5128116404165497"}],"value":"[:rat 0.5128116404165497]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rd</span>","value":":rd"},{"type":"html","content":"<span class='clj-bigint'>6N</span>","value":"6N"}],"value":"[:rd 6N]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ra</span>","value":":ra"},{"type":"html","content":"<span class='clj-ratio'>4/5</span>","value":"4/5"}],"value":"[:ra 4/5]"}],"value":"#polismath.clusters.graph-record42373{:pat 1.4142135623730951, :pd 1/3, :pa 2/3, :na 1, :pdt 0.0, :nd 0, :ns 1, :rdt 1.9230436515620617, :rat 0.5128116404165497, :rd 6N, :ra 4/5}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pat</span>","value":":pat"},{"type":"html","content":"<span class='clj-double'>1.7320508075688772</span>","value":"1.7320508075688772"}],"value":"[:pat 1.7320508075688772]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pd</span>","value":":pd"},{"type":"html","content":"<span class='clj-ratio'>1/4</span>","value":"1/4"}],"value":"[:pd 1/4]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pa</span>","value":":pa"},{"type":"html","content":"<span class='clj-ratio'>3/4</span>","value":"3/4"}],"value":"[:pa 3/4]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:na</span>","value":":na"},{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"}],"value":"[:na 2]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pdt</span>","value":":pdt"},{"type":"html","content":"<span class='clj-double'>-0.5773502691896258</span>","value":"-0.5773502691896258"}],"value":"[:pdt -0.5773502691896258]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:nd</span>","value":":nd"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:nd 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ns</span>","value":":ns"},{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"}],"value":"[:ns 2]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rdt</span>","value":":rdt"},{"type":"html","content":"<span class='clj-double'>1.51744244666721</span>","value":"1.51744244666721"}],"value":"[:rdt 1.51744244666721]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rat</span>","value":":rat"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"}],"value":"[:rat 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rd</span>","value":":rd"},{"type":"html","content":"<span class='clj-ratio'>19/4</span>","value":"19/4"}],"value":"[:rd 19/4]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ra</span>","value":":ra"},{"type":"html","content":"<span class='clj-ratio'>19/24</span>","value":"19/24"}],"value":"[:ra 19/24]"}],"value":"#polismath.clusters.graph-record42373{:pat 1.7320508075688772, :pd 1/4, :pa 3/4, :na 2, :pdt -0.5773502691896258, :nd 0, :ns 2, :rdt 1.51744244666721, :rat 0, :rd 19/4, :ra 19/24}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pat</span>","value":":pat"},{"type":"html","content":"<span class='clj-double'>0.0</span>","value":"0.0"}],"value":"[:pat 0.0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pd</span>","value":":pd"},{"type":"html","content":"<span class='clj-ratio'>1/3</span>","value":"1/3"}],"value":"[:pd 1/3]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pa</span>","value":":pa"},{"type":"html","content":"<span class='clj-ratio'>1/3</span>","value":"1/3"}],"value":"[:pa 1/3]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:na</span>","value":":na"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:na 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pdt</span>","value":":pdt"},{"type":"html","content":"<span class='clj-double'>0.0</span>","value":"0.0"}],"value":"[:pdt 0.0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:nd</span>","value":":nd"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:nd 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ns</span>","value":":ns"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:ns 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rdt</span>","value":":rdt"},{"type":"html","content":"<span class='clj-double'>1.7142857142857144</span>","value":"1.7142857142857144"}],"value":"[:rdt 1.7142857142857144]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rat</span>","value":":rat"},{"type":"html","content":"<span class='clj-double'>-1.7142857142857144</span>","value":"-1.7142857142857144"}],"value":"[:rat -1.7142857142857144]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rd</span>","value":":rd"},{"type":"html","content":"<span class='clj-bigint'>5N</span>","value":"5N"}],"value":"[:rd 5N]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ra</span>","value":":ra"},{"type":"html","content":"<span class='clj-ratio'>5/13</span>","value":"5/13"}],"value":"[:ra 5/13]"}],"value":"#polismath.clusters.graph-record42373{:pat 0.0, :pd 1/3, :pa 1/3, :na 0, :pdt 0.0, :nd 0, :ns 1, :rdt 1.7142857142857144, :rat -1.7142857142857144, :rd 5N, :ra 5/13}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pat</span>","value":":pat"},{"type":"html","content":"<span class='clj-double'>1.0</span>","value":"1.0"}],"value":"[:pat 1.0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pd</span>","value":":pd"},{"type":"html","content":"<span class='clj-ratio'>1/2</span>","value":"1/2"}],"value":"[:pd 1/2]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pa</span>","value":":pa"},{"type":"html","content":"<span class='clj-ratio'>1/2</span>","value":"1/2"}],"value":"[:pa 1/2]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:na</span>","value":":na"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:na 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pdt</span>","value":":pdt"},{"type":"html","content":"<span class='clj-double'>1.0</span>","value":"1.0"}],"value":"[:pdt 1.0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:nd</span>","value":":nd"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:nd 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ns</span>","value":":ns"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:ns 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rdt</span>","value":":rdt"},{"type":"html","content":"<span class='clj-double'>1.5491933384829666</span>","value":"1.5491933384829666"}],"value":"[:rdt 1.5491933384829666]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rat</span>","value":":rat"},{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"}],"value":"[:rat 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rd</span>","value":":rd"},{"type":"html","content":"<span class='clj-bigint'>3N</span>","value":"3N"}],"value":"[:rd 3N]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:ra</span>","value":":ra"},{"type":"html","content":"<span class='clj-ratio'>3/5</span>","value":"3/5"}],"value":"[:ra 3/5]"}],"value":"#polismath.clusters.graph-record42373{:pat 1.0, :pd 1/2, :pa 1/2, :na 0, :pdt 1.0, :nd 0, :ns 0, :rdt 1.5491933384829666, :rat 0, :rd 3N, :ra 3/5}"}],"value":"(#polismath.clusters.graph-record42373{:pat 1.4142135623730951, :pd 1/3, :pa 2/3, :na 1, :pdt 0.0, :nd 0, :ns 1, :rdt 1.9230436515620617, :rat 0, :rd 6N, :ra 12/17} #polismath.clusters.graph-record42373{:pat 0.577350269189626, :pd 1/4, :pa 1/2, :na 1, :pdt -0.5773502691896258, :nd 0, :ns 2, :rdt 1.402684750684886, :rat -2.3726840560069578, :rd 17/4, :ra 17/32} #polismath.clusters.graph-record42373{:pat 0.0, :pd 1/3, :pa 1/3, :na 0, :pdt 0.0, :nd 0, :ns 1, :rdt 1.8561553006146874, :rat -2.9104275004359956, :rd 17/3, :ra 17/48} #polismath.clusters.graph-record42373{:pat 1.4142135623730951, :pd 1/3, :pa 2/3, :na 1, :pdt 0.0, :nd 0, :ns 1, :rdt 1.9230436515620617, :rat 0.5128116404165497, :rd 6N, :ra 4/5} #polismath.clusters.graph-record42373{:pat 1.7320508075688772, :pd 1/4, :pa 3/4, :na 2, :pdt -0.5773502691896258, :nd 0, :ns 2, :rdt 1.51744244666721, :rat 0, :rd 19/4, :ra 19/24} #polismath.clusters.graph-record42373{:pat 0.0, :pd 1/3, :pa 1/3, :na 0, :pdt 0.0, :nd 0, :ns 1, :rdt 1.7142857142857144, :rat -1.7142857142857144, :rd 5N, :ra 5/13} #polismath.clusters.graph-record42373{:pat 1.0, :pd 1/2, :pa 1/2, :na 0, :pdt 1.0, :nd 0, :ns 0, :rdt 1.5491933384829666, :rat 0, :rd 3N, :ra 3/5})"}
;; <=

;; **
;;; I think I know now why we are getting these weird "bad disagree" repful comments.
;;; We decided that if a group doesn't have any truly repful agree comments, we should try to look for the most agreed upon comment for that group and throw it at the beginning so that we have something to say about what the group agrees with.
;;; However, we don't decide whether the comment is repful for or against that comment until the very end, independent of whether it was this special "try to get at least one agree comment".
;;; Since it's entirely possible that the comment might be technically more repful against than for, even though more people agree with it in the group (for instance, if even more people agree with it outside
;;; the focus group), this final step can give us a disagree repness, even though we want it to show up as "agrees".
;;; 
;;; So, technically speaking, the math isn't broken here
;;; The quick fix is to simply fudge these agree comments so that they show up as repful for.
;;; Really though, it's not true.
;;; The more accurate way to move forward (with a touch more work) is to include some other tag, like `agrees: true`.
;;; That would (it seems) only require an extra check on the client to render accordingly.
;;; 
;;; The following is from a trace that we did where we looked at each comment as it was being added to the processed results in `select-rep-comments`:
;; **

;; @@
(binding [clojure.pprint/*print-right-margin* 200]
  (doseq [x [


{:comment-conv-stats {:rat 0, :ra 17/12, :ns 16, :nd 0, :na 16, :rd 1/6, :pdt -3.6380343755449944, :rdt -1.9230436515620617, :pd 1/18, :pat 4.123105625617661, :pa 17/18},                   
 :group-result {:best nil, :best-agree nil, :sufficient []}}                                                                                                                                 
 ""                                                                                                                                                                                            
{:comment-conv-stats {:rat 2.3726840560069578, :ra 32/17, :ns 15, :nd 0, :na 15, :rd 4/17, :pdt -3.5, :rdt -1.402684750684886, :pd 1/17, :pat 4.0, :pa 16/17},                               
 :group-result                                                                                                                                                                               
 {:best {:tid 0, :n-success 0, :n-trials 1, :p-success 1/3, :p-test 0.0, :repness 6N, :repness-test 1.9230436, :repful-for :disagree},                                                       
  :best-agree {:rat 0, :ra 12/17, :ns 1, :nd 0, :tid 0, :na 1, :rd 6N, :pdt 0.0, :rdt 1.9230436515620617, :pd 1/3, :pat 1.4142135623730951, :pa 2/3},                                        
  :sufficient []}}                                                                                                                                                                           
 ""                                                                                                                                                                                            
{:comment-conv-stats {:rat 2.9104275004359956, :ra 48/17, :ns 15, :nd 0, :na 15, :rd 3/17, :pdt -3.5, :rdt -1.8561553006146874, :pd 1/17, :pat 4.0, :pa 16/17},                              
 :group-result                                                                                                                                                                               
 {:best {:tid 0, :n-success 0, :n-trials 1, :p-success 1/3, :p-test 0.0, :repness 6N, :repness-test 1.9230436, :repful-for :disagree},                                                       
  :best-agree {:rat 0, :ra 12/17, :ns 1, :nd 0, :tid 0, :na 1, :rd 6N, :pdt 0.0, :rdt 1.9230436515620617, :pd 1/3, :pat 1.4142135623730951, :pa 2/3},                                        
  :sufficient []}}                                                                                                                                                                           
 ""                                                                                                                                                                                            
{:comment-conv-stats {:rat -0.5128116404165497, :ra 5/4, :ns 16, :nd 0, :na 14, :rd 1/6, :pdt -3.6380343755449944, :rdt -1.9230436515620617, :pd 1/18, :pat 3.1529631254723283, :pa 5/6},    
 :group-result                                                                                                                                                                               
 {:best {:tid 0, :n-success 0, :n-trials 1, :p-success 1/3, :p-test 0.0, :repness 6N, :repness-test 1.9230436, :repful-for :disagree},                                                       
  :best-agree {:rat 0, :ra 12/17, :ns 1, :nd 0, :tid 0, :na 1, :rd 6N, :pdt 0.0, :rdt 1.9230436515620617, :pd 1/3, :pat 1.4142135623730951, :pa 2/3},                                        
  :sufficient []}}                                                                                                                                                                           
""                                                                                                                                                                                             
{:comment-conv-stats {:rat 0, :ra 24/19, :ns 17, :nd 0, :na 17, :rd 4/19, :pdt -3.771236166328253, :rdt -1.51744244666721, :pd 1/19, :pat 4.242640687119285, :pa 18/19},                     
 :group-result                                                                                                                                                                               
 {:best {:tid 3, :n-success 0, :n-trials 1, :p-success 1/3, :p-test 0.0, :repness 6N, :repness-test 1.9230436, :repful-for :disagree},                                                       
  :best-agree {:rat 0, :ra 12/17, :ns 1, :nd 0, :tid 0, :na 1, :rd 6N, :pdt 0.0, :rdt 1.9230436515620617, :pd 1/3, :pat 1.4142135623730951, :pa 2/3},                                        
  :sufficient []}}                                                                                                                                                                           
 ""                                                                                                                                                                                            
{:comment-conv-stats {:rat 1.7142857142857144, :ra 13/5, :ns 13, :nd 0, :na 12, :rd 1/5, :pdt -3.2071349029490928, :rdt -1.7142857142857144, :pd 1/15, :pat 3.2071349029490928, :pa 13/15},  
 :group-result                                                                                                                                                                               
 {:best {:tid 3, :n-success 0, :n-trials 1, :p-success 1/3, :p-test 0.0, :repness 6N, :repness-test 1.9230436, :repful-for :disagree},                                                       
  :best-agree {:rat 0, :ra 19/24, :ns 2, :nd 0, :tid 4, :na 2, :rd 19/4, :pdt -0.5773502691896258, :rdt 1.51744244666721, :pd 1/4, :pat 1.7320508075688772, :pa 3/4},                        
  :sufficient []}}                                                                                                                                                                           
                                                                                             ""                                                                                                
{:comment-conv-stats {:rat 0, :ra 5/3, :ns 4, :nd 0, :na 4, :rd 1/3, :pdt -1.3416407864998738, :rdt -1.5491933384829666, :pd 1/6, :pat 2.23606797749979, :pa 5/6},                           
 :group-result                                                                                                                                                                               
 {:best {:tid 3, :n-success 0, :n-trials 1, :p-success 1/3, :p-test 0.0, :repness 6N, :repness-test 1.9230436, :repful-for :disagree},                                                       
  :best-agree {:rat 0, :ra 19/24, :ns 2, :nd 0, :tid 4, :na 2, :rd 19/4, :pdt -0.5773502691896258, :rdt 1.51744244666721, :pd 1/4, :pat 1.7320508075688772, :pa 3/4},                        
  :sufficient []}}
    
    ]]
      (clojure.pprint/pprint x)))
;; @@
;; ->
;;; {:comment-conv-stats {:rat 0, :ra 17/12, :ns 16, :nd 0, :na 16, :rd 1/6, :pdt -3.6380343755449944, :rdt -1.9230436515620617, :pd 1/18, :pat 4.123105625617661, :pa 17/18},
;;;  :group-result {:best nil, :best-agree nil, :sufficient []}}
;;; &quot;&quot;
;;; {:comment-conv-stats {:rat 2.3726840560069578, :ra 32/17, :ns 15, :nd 0, :na 15, :rd 4/17, :pdt -3.5, :rdt -1.402684750684886, :pd 1/17, :pat 4.0, :pa 16/17},
;;;  :group-result
;;;  {:best {:n-trials 1, :tid 0, :repful-for :disagree, :repness-test 1.9230436, :repness 6N, :p-test 0.0, :p-success 1/3, :n-success 0},
;;;   :best-agree {:rat 0, :ra 12/17, :ns 1, :nd 0, :tid 0, :na 1, :rd 6N, :pdt 0.0, :rdt 1.9230436515620617, :pd 1/3, :pat 1.4142135623730951, :pa 2/3},
;;;   :sufficient []}}
;;; &quot;&quot;
;;; {:comment-conv-stats {:rat 2.9104275004359956, :ra 48/17, :ns 15, :nd 0, :na 15, :rd 3/17, :pdt -3.5, :rdt -1.8561553006146874, :pd 1/17, :pat 4.0, :pa 16/17},
;;;  :group-result
;;;  {:best {:n-trials 1, :tid 0, :repful-for :disagree, :repness-test 1.9230436, :repness 6N, :p-test 0.0, :p-success 1/3, :n-success 0},
;;;   :best-agree {:rat 0, :ra 12/17, :ns 1, :nd 0, :tid 0, :na 1, :rd 6N, :pdt 0.0, :rdt 1.9230436515620617, :pd 1/3, :pat 1.4142135623730951, :pa 2/3},
;;;   :sufficient []}}
;;; &quot;&quot;
;;; {:comment-conv-stats {:rat -0.5128116404165497, :ra 5/4, :ns 16, :nd 0, :na 14, :rd 1/6, :pdt -3.6380343755449944, :rdt -1.9230436515620617, :pd 1/18, :pat 3.1529631254723283, :pa 5/6},
;;;  :group-result
;;;  {:best {:n-trials 1, :tid 0, :repful-for :disagree, :repness-test 1.9230436, :repness 6N, :p-test 0.0, :p-success 1/3, :n-success 0},
;;;   :best-agree {:rat 0, :ra 12/17, :ns 1, :nd 0, :tid 0, :na 1, :rd 6N, :pdt 0.0, :rdt 1.9230436515620617, :pd 1/3, :pat 1.4142135623730951, :pa 2/3},
;;;   :sufficient []}}
;;; &quot;&quot;
;;; {:comment-conv-stats {:rat 0, :ra 24/19, :ns 17, :nd 0, :na 17, :rd 4/19, :pdt -3.771236166328253, :rdt -1.51744244666721, :pd 1/19, :pat 4.242640687119285, :pa 18/19},
;;;  :group-result
;;;  {:best {:n-trials 1, :tid 3, :repful-for :disagree, :repness-test 1.9230436, :repness 6N, :p-test 0.0, :p-success 1/3, :n-success 0},
;;;   :best-agree {:rat 0, :ra 12/17, :ns 1, :nd 0, :tid 0, :na 1, :rd 6N, :pdt 0.0, :rdt 1.9230436515620617, :pd 1/3, :pat 1.4142135623730951, :pa 2/3},
;;;   :sufficient []}}
;;; &quot;&quot;
;;; {:comment-conv-stats {:rat 1.7142857142857144, :ra 13/5, :ns 13, :nd 0, :na 12, :rd 1/5, :pdt -3.2071349029490928, :rdt -1.7142857142857144, :pd 1/15, :pat 3.2071349029490928, :pa 13/15},
;;;  :group-result
;;;  {:best {:n-trials 1, :tid 3, :repful-for :disagree, :repness-test 1.9230436, :repness 6N, :p-test 0.0, :p-success 1/3, :n-success 0},
;;;   :best-agree {:rat 0, :ra 19/24, :ns 2, :nd 0, :tid 4, :na 2, :rd 19/4, :pdt -0.5773502691896258, :rdt 1.51744244666721, :pd 1/4, :pat 1.7320508075688772, :pa 3/4},
;;;   :sufficient []}}
;;; &quot;&quot;
;;; {:comment-conv-stats {:rat 0, :ra 5/3, :ns 4, :nd 0, :na 4, :rd 1/3, :pdt -1.3416407864998738, :rdt -1.5491933384829666, :pd 1/6, :pat 2.23606797749979, :pa 5/6},
;;;  :group-result
;;;  {:best {:n-trials 1, :tid 3, :repful-for :disagree, :repness-test 1.9230436, :repness 6N, :p-test 0.0, :p-success 1/3, :n-success 0},
;;;   :best-agree {:rat 0, :ra 19/24, :ns 2, :nd 0, :tid 4, :na 2, :rd 19/4, :pdt -0.5773502691896258, :rdt 1.51744244666721, :pd 1/4, :pat 1.7320508075688772, :pa 3/4},
;;;   :sufficient []}}
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; The thing to take away from this is that we end up with the `best-agree` comment shown, and that this comment -- though having higher agreement that disagreement -- has better repness _against_ agreement than _for_ it.
;; **

;; @@

;; @@
